USE [master]
GO
/****** Object:  Database [baseWebSupervisor]    Script Date: 21/06/2016 2:15:10 ******/
CREATE DATABASE [baseWebSupervisor]
 CONTAINMENT = NONE
 ON  PRIMARY 
( NAME = N'baseWebSupervisor', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\baseWebSupervisor.mdf' , SIZE = 6144KB , MAXSIZE = UNLIMITED, FILEGROWTH = 1024KB )
 LOG ON 
( NAME = N'baseWebSupervisor_log', FILENAME = N'C:\Program Files\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\DATA\baseWebSupervisor_log.ldf' , SIZE = 1108800KB , MAXSIZE = 2048GB , FILEGROWTH = 10%)
GO
ALTER DATABASE [baseWebSupervisor] SET COMPATIBILITY_LEVEL = 120
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [baseWebSupervisor].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [baseWebSupervisor] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET ARITHABORT OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET AUTO_CLOSE OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [baseWebSupervisor] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [baseWebSupervisor] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET  DISABLE_BROKER 
GO
ALTER DATABASE [baseWebSupervisor] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [baseWebSupervisor] SET READ_COMMITTED_SNAPSHOT OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET RECOVERY FULL 
GO
ALTER DATABASE [baseWebSupervisor] SET  MULTI_USER 
GO
ALTER DATABASE [baseWebSupervisor] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [baseWebSupervisor] SET DB_CHAINING OFF 
GO
ALTER DATABASE [baseWebSupervisor] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [baseWebSupervisor] SET TARGET_RECOVERY_TIME = 0 SECONDS 
GO
ALTER DATABASE [baseWebSupervisor] SET DELAYED_DURABILITY = DISABLED 
GO
EXEC sys.sp_db_vardecimal_storage_format N'baseWebSupervisor', N'ON'
GO
ALTER AUTHORIZATION ON DATABASE::[baseWebSupervisor] TO [GUSTAVOPC\Licen]
GO
USE [baseWebSupervisor]
GO
/****** Object:  FullTextCatalog [Busquedas]    Script Date: 21/06/2016 2:15:10 ******/
CREATE FULLTEXT CATALOG [Busquedas]WITH ACCENT_SENSITIVITY = OFF
AS DEFAULT
AUTHORIZATION [dbo]

GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_Administrador]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_Administrador] 
 AS [bigint]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 19999999
 CYCLE 
 CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_Administrador] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_Ano]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_Ano] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 198888888
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_Ano] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_Colegio]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_Colegio] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 198888888
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_Colegio] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_ConsultaAdministradores]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_ConsultaAdministradores] 
 AS [bigint]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 1999999999
 CYCLE 
 CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_ConsultaAdministradores] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_Ejercicio]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_Ejercicio] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 19888888
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_Ejercicio] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_Materia]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_Materia] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 198888888
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_Materia] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[Secuancia_MensajesAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[Secuancia_MensajesAdministrador] 
 AS [bigint]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 99999999
 CYCLE 
 CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[Secuancia_MensajesAdministrador] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_MisEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_MisEjercicios] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 19888888
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_MisEjercicios] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_MisExplicaciones]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_MisExplicaciones] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 19888888
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_MisExplicaciones] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_PedidoEjercicioVideo]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_PedidoEjercicioVideo] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 1988888
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_PedidoEjercicioVideo] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_PreguntaUsuario]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_PreguntaUsuario] 
 AS [bigint]
 START WITH -9223372036854775808
 INCREMENT BY 1
 MINVALUE -9223372036854775808
 MAXVALUE 9223372036854775807
 CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_PreguntaUsuario] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_Profesor]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_Profesor] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 19888888
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_Profesor] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_TablaEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_TablaEjercicios] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 1988888
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_TablaEjercicios] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_TablaEmpresa]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_TablaEmpresa] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 198888888
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_TablaEmpresa] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_TablaMovimientos]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_TablaMovimientos] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 18999999
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_TablaMovimientos] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_TablaPedidoExplicacion]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_TablaPedidoExplicacion] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 19888888
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_TablaPedidoExplicacion] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_TablaProfesor]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_TablaProfesor] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 19888888
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_TablaProfesor] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_TablaTema]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_TablaTema] 
 AS [bigint]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 19888888
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_TablaTema] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_TablaUsuario]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_TablaUsuario] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 18999999
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_TablaUsuario] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_TarjetaPrepaga]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_TarjetaPrepaga] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 19888888
 CYCLE 
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_TarjetaPrepaga] TO  SCHEMA OWNER 
GO
USE [baseWebSupervisor]
GO
/****** Object:  Sequence [dbo].[secuancia_Tema]    Script Date: 21/06/2016 2:15:10 ******/
CREATE SEQUENCE [dbo].[secuancia_Tema] 
 AS [int]
 START WITH 1
 INCREMENT BY 1
 MINVALUE 1
 MAXVALUE 19888888
 NO CACHE 
GO
ALTER AUTHORIZATION ON [dbo].[secuancia_Tema] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_Administrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_Administrador](
	[id_Administrador] [int] NOT NULL CONSTRAINT [DF_Tabla_Administrador_id_Administrador]  DEFAULT (NEXT VALUE FOR [secuancia_Administrador]),
	[administrador] [nvarchar](10) NOT NULL,
	[contrasenaAdministrador] [nvarchar](10) NOT NULL,
	[bloqueo] [bit] NOT NULL CONSTRAINT [DF_Tabla_Administrador_bloqueo]  DEFAULT (NEXT VALUE FOR [secuancia_Administrador]),
	[id_Empresa] [int] NULL,
 CONSTRAINT [PK_Table_Administrador] PRIMARY KEY CLUSTERED 
(
	[id_Administrador] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_Administrador] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_Ano]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_Ano](
	[id_Ano] [int] NOT NULL CONSTRAINT [DF_Tabla_Ano_id_Ano]  DEFAULT (NEXT VALUE FOR [secuancia_Ano]),
	[ano] [nvarchar](50) NULL,
	[etiquetaAno] [int] NULL,
 CONSTRAINT [PK_Tabla_Ano] PRIMARY KEY CLUSTERED 
(
	[id_Ano] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_Ano] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_BuquedasEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_BuquedasEjercicios](
	[id_Ejercicio] [int] NOT NULL,
	[etiquetaTema] [nvarchar](150) NULL,
	[etiquetaMateria] [nvarchar](150) NULL,
	[etiquetaColegio] [nvarchar](150) NULL,
	[etiquetaProfesor] [nvarchar](150) NULL,
	[etiquetaAno] [nvarchar](150) NULL,
	[id_TipoInstitucion] [int] NULL,
 CONSTRAINT [PK_Tabla_BuquedaEjercicios] PRIMARY KEY CLUSTERED 
(
	[id_Ejercicio] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_BuquedasEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_Categoria]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_Categoria](
	[id_Administrador] [int] NULL,
	[a1] [int] NULL,
	[a2] [int] NULL,
	[a3] [int] NULL,
	[u1] [int] NULL,
	[u2] [int] NULL,
	[p1] [int] NULL,
	[p2] [int] NULL,
	[p3] [int] NULL,
	[p4] [int] NULL,
	[ce1] [int] NULL,
	[ce2] [int] NULL,
	[ie1] [int] NULL,
	[ie2] [int] NULL,
	[c1] [int] NULL,
	[c2] [int] NULL,
	[c3] [int] NULL,
	[c4] [int] NULL,
	[c5] [int] NULL,
	[ep1] [int] NULL,
	[ep2] [int] NULL
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_Categoria] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_Colegio]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_Colegio](
	[id_Colegio] [int] NOT NULL CONSTRAINT [DF_Tabla_Colegio_id_Colegio]  DEFAULT (NEXT VALUE FOR [secuancia_Colegio]),
	[colegio] [nvarchar](50) NULL,
	[etiquetaColegio] [int] NULL,
 CONSTRAINT [PK_Tabla_Colegio] PRIMARY KEY CLUSTERED 
(
	[id_Colegio] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_Colegio] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_ConsultaAdministradores]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_ConsultaAdministradores](
	[id_ConsultaAdministrador] [int] NOT NULL CONSTRAINT [DF_Tabla_ConsultaAdministradores_id_ConsultaAdministrador]  DEFAULT (NEXT VALUE FOR [secuancia_ConsultaAdministradores]),
	[id_Administrador] [int] NOT NULL,
	[ingresoAdministrador] [datetime] NULL,
	[egresoAdministrador] [datetime] NULL,
	[ipAdministrador] [nvarchar](20) NULL,
 CONSTRAINT [PK_Tabla_Administradores] PRIMARY KEY CLUSTERED 
(
	[id_ConsultaAdministrador] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_ConsultaAdministradores] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_DatosExtraUsuario]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_DatosExtraUsuario](
	[id_Usuario] [int] NOT NULL,
	[ipAddress] [nvarchar](20) NULL,
	[bloqueoUsuario] [bit] NOT NULL,
	[ofertaProximaCarga] [int] NULL,
	[codigoBloqueo] [int] NULL
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_DatosExtraUsuario] TO  SCHEMA OWNER 
GO
/****** Object:  Index [id_UsuarioClave]    Script Date: 21/06/2016 2:15:10 ******/
CREATE UNIQUE CLUSTERED INDEX [id_UsuarioClave] ON [dbo].[Tabla_DatosExtraUsuario]
(
	[id_Usuario] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Tabla_DatosUsuario]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_DatosUsuario](
	[id_Usuario] [int] NOT NULL,
	[telefono] [nvarchar](20) NULL,
	[modeloTelefono] [nvarchar](20) NULL,
	[skype] [nvarchar](30) NULL,
	[pais] [int] NULL
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_DatosUsuario] TO  SCHEMA OWNER 
GO
/****** Object:  Index [id_UsuarioClave]    Script Date: 21/06/2016 2:15:10 ******/
CREATE UNIQUE CLUSTERED INDEX [id_UsuarioClave] ON [dbo].[Tabla_DatosUsuario]
(
	[id_Usuario] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Tabla_DuracionProductos]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_DuracionProductos](
	[id_Empresa] [int] NOT NULL,
	[duracionVideos] [int] NOT NULL,
	[duracionEjercicios] [int] NOT NULL,
	[precioVideo] [decimal](18, 2) NULL,
	[precioEjercicio] [decimal](18, 2) NULL,
	[precioExplicacion] [decimal](18, 2) NULL,
	[precioImpresion] [decimal](18, 2) NULL,
	[ejerciciosCompradosHabitue] [int] NULL,
	[recargaHabitue] [decimal](18, 2) NULL
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_DuracionProductos] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_Ejercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_Ejercicios](
	[id_Ejercicio] [int] NOT NULL CONSTRAINT [DF_Tabla_Ejercicios_id_Ejercicio]  DEFAULT (NEXT VALUE FOR [secuancia_TablaEjercicios]),
	[Titulo] [nvarchar](50) NOT NULL,
	[id_TipoEjercicio] [int] NULL,
	[explicacionRealizada] [bit] NULL,
 CONSTRAINT [PK_Tabla_Ejercicios] PRIMARY KEY CLUSTERED 
(
	[id_Ejercicio] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_Ejercicios] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_Empresa]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_Empresa](
	[id_Empresa] [int] NOT NULL CONSTRAINT [DF_Tabla_Empresa_id_Empresa]  DEFAULT (NEXT VALUE FOR [secuancia_TablaEmpresa]),
	[empresa] [nvarchar](10) NOT NULL,
 CONSTRAINT [PK_Tabla_Empresa] PRIMARY KEY CLUSTERED 
(
	[id_Empresa] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_Empresa] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_EnunciadoEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_EnunciadoEjercicios](
	[id_Ejercicio] [int] NOT NULL,
	[enunciadoMath] [nvarchar](max) NULL,
	[enunciadoLimpio] [nvarchar](max) NULL,
 CONSTRAINT [PK_Tabla_EnunciadoEjercicios] PRIMARY KEY CLUSTERED 
(
	[id_Ejercicio] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_EnunciadoEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_Materia]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_Materia](
	[id_Materia] [int] NOT NULL CONSTRAINT [DF_Tabla_Materia_id_Materia]  DEFAULT (NEXT VALUE FOR [secuancia_Materia]),
	[materia] [nvarchar](50) NULL,
	[etiquetaMateria] [int] NULL,
 CONSTRAINT [PK_Tabla_Materia] PRIMARY KEY CLUSTERED 
(
	[id_Materia] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_Materia] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_MensajeAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_MensajeAdministrador](
	[id_MensajeAdministrador] [int] NOT NULL CONSTRAINT [DF_Tabla_MensajeAdministrador_id_MensajeAdministrador]  DEFAULT (NEXT VALUE FOR [secuancia_MensajesAdministrador]),
	[id_Administrador] [int] NULL,
	[mensajeAdministrador] [nvarchar](max) NULL,
	[fechaComentario] [datetime] NULL,
 CONSTRAINT [PK_Tabla_MensajeAdministrador_1] PRIMARY KEY CLUSTERED 
(
	[id_MensajeAdministrador] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_MensajeAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_MisEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_MisEjercicios](
	[id_CompraEjercicioExplicaicones] [int] NOT NULL CONSTRAINT [DF_Tabla_MisEjercicios_id_CompraEjercicioExplicaicones]  DEFAULT (NEXT VALUE FOR [secuancia_MisEjercicios]),
	[id_Ejercicio] [int] NOT NULL,
	[ejercicio] [bit] NOT NULL,
	[explicacion] [bit] NOT NULL,
	[venvimiento] [int] NOT NULL,
	[fechaVencimiento] [datetime] NOT NULL,
	[id_Usuario] [int] NOT NULL,
 CONSTRAINT [PK_Tabla_MisEjercicios] PRIMARY KEY CLUSTERED 
(
	[id_CompraEjercicioExplicaicones] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_MisEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_MisExplicaciones]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_MisExplicaciones](
	[id_CompraVideos] [int] NULL CONSTRAINT [DF_Tabla_MisExplicaciones_id_CompraVideos]  DEFAULT (NEXT VALUE FOR [secuancia_MisExplicaciones]),
	[id_Ejercicio] [int] NULL,
	[video] [bit] NULL,
	[vencimiento] [int] NULL,
	[fechaVencimiento] [datetime] NULL,
	[id_Usuario] [int] NULL
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_MisExplicaciones] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_Movimientos]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_Movimientos](
	[id_Movimiento] [int] NOT NULL CONSTRAINT [DF_Tabla_Movimientos_id_Movimiento]  DEFAULT (NEXT VALUE FOR [secuancia_TablaMovimientos]),
	[id_Usuario] [int] NOT NULL,
	[id_TipoMovimiento] [int] NOT NULL,
	[debe] [decimal](18, 2) NULL,
	[haber] [decimal](18, 2) NULL,
	[fechaMovimiento] [date] NOT NULL,
 CONSTRAINT [PK_Tabla_Movimientos_1] PRIMARY KEY CLUSTERED 
(
	[id_Movimiento] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_Movimientos] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_Ofertas]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_Ofertas](
	[id_Empresa] [int] NOT NULL,
	[oferta_1PrestamoSOS] [bit] NULL,
	[oferta_2Registro] [bit] NULL,
	[oferta_3ProximaCarga] [bit] NULL,
	[oferta_4AumentoCarga] [bit] NULL,
	[oferta_5RegaloCarga] [bit] NULL,
	[oferta_6DosXUno] [bit] NULL,
	[oferta_7DosXUnoIgualProducto] [bit] NULL,
	[oferta_8Gratis] [bit] NULL,
	[oferta_9DescuentoSegundo] [bit] NULL,
	[oferta_10BonificaciónHabitue] [bit] NULL,
	[oferta_11AumentoDiasCompras] [bit] NULL,
	[oferta_12AumentoDiasTodasCompras] [bit] NULL,
	[oferta_13DescuentoCompra] [bit] NULL,
	[oferta_14ImpresionGratis] [bit] NULL,
	[oferta_15VideosGratis] [bit] NULL,
	[oferta_16EjerciciosGratis] [bit] NULL,
	[oferta_17ExplicacionesGratis] [bit] NULL,
	[oferta_18] [bit] NULL,
	[oferta_19] [bit] NULL,
	[oferta_20] [bit] NULL
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_Ofertas] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_PedidoEjercicioVideo]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_PedidoEjercicioVideo](
	[id_PedidoEjercicioVideo] [int] NOT NULL CONSTRAINT [DF_Tabla_PedidoEjercicioVideo_id_PedidoEjercicioVideo]  DEFAULT (NEXT VALUE FOR [secuancia_PedidoEjercicioVideo]),
	[id_Usuario] [int] NOT NULL,
	[id_Administrador] [int] NULL,
	[fechaPedidoEjercicioVideo] [datetime] NULL,
	[fichaEjercicioVideo] [nvarchar](50) NULL,
	[enunciadoEjercicioVideoMATH] [nvarchar](50) NULL,
	[adjuntoEjercicioVideo] [nvarchar](50) NULL,
	[realizadoOKPedidoEjercicioVideo] [bit] NULL,
	[pedidoExplicacion] [bit] NULL,
	[id_Empresa] [int] NULL,
	[pedidoEjercicio] [bit] NULL,
 CONSTRAINT [PK_Tabla_PedidoEjercicioVideo] PRIMARY KEY CLUSTERED 
(
	[id_PedidoEjercicioVideo] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_PedidoEjercicioVideo] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_PedidoExplicacion]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_PedidoExplicacion](
	[id_PedidoExplicacion] [int] NOT NULL CONSTRAINT [DF_Tabla_PedidoExplicacion_id_PedidoExplicacion]  DEFAULT (NEXT VALUE FOR [secuancia_TablaPedidoExplicacion]),
	[id_Usuario] [int] NOT NULL,
	[fechaPedidoExplicacion] [datetime] NULL,
	[id_Ejercicio] [int] NULL,
	[id_Empresa] [int] NULL,
 CONSTRAINT [PK_Tabla_PedidoExplicacion] PRIMARY KEY CLUSTERED 
(
	[id_PedidoExplicacion] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_PedidoExplicacion] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_PreguntaClientes]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_PreguntaClientes](
	[id_PreguntaUsuario] [int] NOT NULL CONSTRAINT [DF_Tabla_PreguntaClientes_id_PreguntaUsuario]  DEFAULT (NEXT VALUE FOR [secuancia_PreguntaUsuario]),
	[PreguntaUsuario] [nvarchar](max) NOT NULL,
	[id_Empresa] [int] NOT NULL,
	[fechaComentario] [datetime] NOT NULL,
	[correoCliente] [nvarchar](30) NOT NULL,
 CONSTRAINT [PK_Tabla_PreguntaUsuario] PRIMARY KEY CLUSTERED 
(
	[id_PreguntaUsuario] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_PreguntaClientes] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_Profesor]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_Profesor](
	[id_Profesor] [int] NOT NULL,
	[profesor] [nvarchar](50) NULL,
	[etiquetaProfesor] [int] NULL,
 CONSTRAINT [PK_Tabla_Profesor] PRIMARY KEY CLUSTERED 
(
	[id_Profesor] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_Profesor] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_TarjetaPrepaga]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_TarjetaPrepaga](
	[id_Tarjeta] [int] NOT NULL CONSTRAINT [DF_Tabla_TarjetaPrepaga_id_Tarjeta]  DEFAULT (NEXT VALUE FOR [secuancia_TarjetaPrepaga]),
	[codigoTarjeta] [nvarchar](50) NULL,
	[valorTarjeta] [decimal](18, 2) NULL,
	[vencimientoTarjeta] [datetime] NULL,
	[bloqueoTarjeta] [bit] NULL,
	[id_Empresa] [int] NULL,
 CONSTRAINT [PK_Tabla_Tarjeta_Prepaga] PRIMARY KEY CLUSTERED 
(
	[id_Tarjeta] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_TarjetaPrepaga] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_Tema]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_Tema](
	[id_Tema] [int] NOT NULL CONSTRAINT [DF_Tabla_Tema_id_Tema]  DEFAULT (NEXT VALUE FOR [secuancia_Tema]),
	[tema] [nvarchar](50) NOT NULL,
	[etiquetaTema] [int] NOT NULL,
 CONSTRAINT [PK_Tabla_Tema] PRIMARY KEY CLUSTERED 
(
	[id_Tema] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_Tema] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_TipoIntitucion]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_TipoIntitucion](
	[id_TipoInstitucion] [int] NOT NULL,
	[tipoInstitucion] [nvarchar](50) NULL,
 CONSTRAINT [PK_Tabla_TipoIntitucion] PRIMARY KEY CLUSTERED 
(
	[id_TipoInstitucion] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_TipoIntitucion] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_TipoMovimientos]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_TipoMovimientos](
	[id_TipoMovimiento] [int] NOT NULL,
	[tipoMovimiento] [nvarchar](30) NULL,
 CONSTRAINT [PK_Tabla_Movimientos] PRIMARY KEY CLUSTERED 
(
	[id_TipoMovimiento] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_TipoMovimientos] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_UbicacionEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_UbicacionEjercicios](
	[id_Ejercicio] [int] NOT NULL,
	[ubicacionVisible] [nvarchar](50) NULL,
	[ubicacionImprimible] [nvarchar](50) NULL,
	[ubicacionVideo] [nvarchar](50) NULL
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_UbicacionEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_Usuario]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_Usuario](
	[id_Usuario] [int] NOT NULL CONSTRAINT [DF_Tabla_Usuario_id_Usuario]  DEFAULT (NEXT VALUE FOR [secuancia_TablaUsuario]),
	[password] [nvarchar](10) NULL,
	[correo] [nvarchar](30) NULL,
	[id_Empresa] [int] NOT NULL,
	[id_Facebook] [nvarchar](20) NULL,
	[nameFacebook] [nvarchar](60) NULL,
 CONSTRAINT [PK_Tabla_Usuario] PRIMARY KEY CLUSTERED 
(
	[id_Usuario] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_Usuario] TO  SCHEMA OWNER 
GO
/****** Object:  Table [dbo].[Tabla_UsuarioCredito]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_UsuarioCredito](
	[id_Usuario] [int] NOT NULL,
	[creditoUsuario] [decimal](18, 2) NULL,
	[prestamoReal] [decimal](18, 2) NULL,
	[prestamoSOS] [bit] NULL
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_UsuarioCredito] TO  SCHEMA OWNER 
GO
/****** Object:  Index [id_UsuarioClave]    Script Date: 21/06/2016 2:15:10 ******/
CREATE UNIQUE CLUSTERED INDEX [id_UsuarioClave] ON [dbo].[Tabla_UsuarioCredito]
(
	[id_Usuario] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Tabla_ValorOfertas]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Tabla_ValorOfertas](
	[id_Empresa] [int] NOT NULL,
	[oferta_1ValorPrestamoSOS] [decimal](8, 2) NULL,
	[oferta_2ValorRegistro] [decimal](8, 2) NULL,
	[oferta_3ValorProximaCarga] [int] NULL,
	[oferta_4ValorAumentoCarga] [int] NULL,
	[oferta_5ValorRegaloCarga] [decimal](8, 2) NULL,
	[oferta_6ValorDosXUno] [bit] NULL,
	[oferta_7ValorDosXUnoigualProducto] [bit] NULL,
	[oferta_8ValorGratis] [int] NULL,
	[oferta_9ValorDescuentoSegundo] [decimal](8, 2) NULL,
	[oferta_10ValorBonificacionHabitue] [int] NULL,
	[oferta_11ValorAumentoDiasCompras] [int] NULL,
	[oferta_12ValorAumentoDiasTodasCompras] [int] NULL,
	[oferta_13ValorDescuentoCompra] [decimal](8, 2) NULL,
	[oferta_14ValorImpresionGratis] [int] NULL,
	[oferta_15ValorVideoGratis] [int] NULL,
	[oferta_16ValorEjerciciosGratis] [int] NULL,
	[oferta_17ValorExplicacionesGratis] [int] NULL,
	[oferta_18Valor] [decimal](8, 2) NULL,
	[oferta_19Valor] [decimal](8, 2) NULL,
	[oferta_20Valor] [decimal](8, 2) NULL
) ON [PRIMARY]

GO
ALTER AUTHORIZATION ON [dbo].[Tabla_ValorOfertas] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_ActivacionUsuarioWeb]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_ActivacionUsuarioWeb]
AS
SELECT        dbo.Tabla_Empresa.id_Empresa, dbo.Tabla_Usuario.id_Usuario, dbo.Tabla_DatosExtraUsuario.codigoBloqueo, dbo.Tabla_DatosExtraUsuario.bloqueoUsuario, dbo.Tabla_Usuario.id_Facebook, 
                         dbo.Tabla_Usuario.nameFacebook, dbo.Tabla_Usuario.correo, dbo.Tabla_DatosUsuario.telefono
FROM            dbo.Tabla_Usuario INNER JOIN
                         dbo.Tabla_Empresa ON dbo.Tabla_Usuario.id_Empresa = dbo.Tabla_Empresa.id_Empresa INNER JOIN
                         dbo.Tabla_DatosExtraUsuario ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_DatosExtraUsuario.id_Usuario INNER JOIN
                         dbo.Tabla_DatosUsuario ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_DatosUsuario.id_Usuario

GO
ALTER AUTHORIZATION ON [dbo].[Vista_ActivacionUsuarioWeb] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_BusquedaEjercicioDatalistWeb]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_BusquedaEjercicioDatalistWeb]
AS
SELECT        dbo.Tabla_Ejercicios.id_Ejercicio, dbo.Tabla_Ejercicios.Titulo, dbo.Tabla_BusquedaEjercicios.etiquetaTema, dbo.Tabla_BusquedaEjercicios.etiquetaMateria, dbo.Tabla_BusquedaEjercicios.etiquetaColegio, 
                         dbo.Tabla_BusquedaEjercicios.etiquetaProfesor, dbo.Tabla_BusquedaEjercicios.etiquetaAno, dbo.Tabla_BusquedaEjercicios.id_TipoInstitucion
FROM            dbo.Tabla_BusquedaEjercicios INNER JOIN
                         dbo.Tabla_Ejercicios ON dbo.Tabla_BusquedaEjercicios.id_Ejericicio = dbo.Tabla_Ejercicios.id_Ejercicio

GO
ALTER AUTHORIZATION ON [dbo].[Vista_BusquedaEjercicioDatalistWeb] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_ConsultasAdministradores]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_ConsultasAdministradores]
AS
SELECT        dbo.Tabla_ConsultaAdministradores.id_ConsultaAdministrador, dbo.Tabla_Administrador.administrador, dbo.Tabla_ConsultaAdministradores.ingresoAdministrador, 
                         dbo.Tabla_ConsultaAdministradores.egresoAdministrador, dbo.Tabla_ConsultaAdministradores.ipAdministrador, dbo.Tabla_Empresa.id_Empresa
FROM            dbo.Tabla_Administrador INNER JOIN
                         dbo.Tabla_ConsultaAdministradores ON dbo.Tabla_Administrador.id_Administrador = dbo.Tabla_ConsultaAdministradores.id_Administrador INNER JOIN
                         dbo.Tabla_Empresa ON dbo.Tabla_Administrador.id_Empresa = dbo.Tabla_Empresa.id_Empresa

GO
ALTER AUTHORIZATION ON [dbo].[Vista_ConsultasAdministradores] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_CreditoUsuarioWeb]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_CreditoUsuarioWeb]
AS
SELECT        dbo.Tabla_Usuario.id_Usuario, dbo.Tabla_UsuarioCredito.creditoUsuario
FROM            dbo.Tabla_Usuario INNER JOIN
                         dbo.Tabla_UsuarioCredito ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_UsuarioCredito.id_Usuario

GO
ALTER AUTHORIZATION ON [dbo].[Vista_CreditoUsuarioWeb] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_LogueoUsuariosWeb]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_LogueoUsuariosWeb]
AS
SELECT        dbo.Tabla_DatosExtraUsuario.bloqueoUsuario, dbo.Tabla_DatosUsuario.telefono, dbo.Tabla_Usuario.id_Usuario, dbo.Tabla_Usuario.password, dbo.Tabla_Usuario.correo, dbo.Tabla_Usuario.id_Empresa, 
                         dbo.Tabla_Usuario.id_Facebook, dbo.Tabla_Usuario.nameFacebook
FROM            dbo.Tabla_DatosExtraUsuario INNER JOIN
                         dbo.Tabla_Usuario ON dbo.Tabla_DatosExtraUsuario.id_Usuario = dbo.Tabla_Usuario.id_Usuario INNER JOIN
                         dbo.Tabla_DatosUsuario ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_DatosUsuario.id_Usuario

GO
ALTER AUTHORIZATION ON [dbo].[Vista_LogueoUsuariosWeb] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_MensajeAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_MensajeAdministrador]
AS
SELECT        dbo.Tabla_Administrador.administrador, dbo.Tabla_Empresa.id_Empresa, dbo.Tabla_MensajeAdministrador.mensajeAdministrador, dbo.Tabla_MensajeAdministrador.id_MensajeAdministrador, 
                         dbo.Tabla_MensajeAdministrador.fechaComentario
FROM            dbo.Tabla_Administrador INNER JOIN
                         dbo.Tabla_Empresa ON dbo.Tabla_Administrador.id_Empresa = dbo.Tabla_Empresa.id_Empresa INNER JOIN
                         dbo.Tabla_MensajeAdministrador ON dbo.Tabla_Administrador.id_Administrador = dbo.Tabla_MensajeAdministrador.id_Administrador

GO
ALTER AUTHORIZATION ON [dbo].[Vista_MensajeAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_MisEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_MisEjercicios]
AS
SELECT        dbo.Tabla_MisEjercicios.*, dbo.Tabla_Empresa.id_Empresa
FROM            dbo.Tabla_Empresa INNER JOIN
                         dbo.Tabla_Usuario ON dbo.Tabla_Empresa.id_Empresa = dbo.Tabla_Usuario.id_Empresa INNER JOIN
                         dbo.Tabla_MisEjercicios ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_MisEjercicios.id_Usuario

GO
ALTER AUTHORIZATION ON [dbo].[Vista_MisEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_MisExplicaciones]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_MisExplicaciones]
AS
SELECT        dbo.Tabla_MisExplicaciones.*, dbo.Tabla_Empresa.id_Empresa
FROM            dbo.Tabla_MisExplicaciones INNER JOIN
                         dbo.Tabla_Usuario ON dbo.Tabla_MisExplicaciones.id_Usuario = dbo.Tabla_Usuario.id_Usuario INNER JOIN
                         dbo.Tabla_Empresa ON dbo.Tabla_Usuario.id_Empresa = dbo.Tabla_Empresa.id_Empresa

GO
ALTER AUTHORIZATION ON [dbo].[Vista_MisExplicaciones] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_MostrarEnunciadoDatalistWeb]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_MostrarEnunciadoDatalistWeb]
AS
SELECT        dbo.Tabla_UbicacionEjercicios.ubicacionVideo, dbo.Tabla_Ejercicios.id_Ejercicio
FROM            dbo.Tabla_Ejercicios INNER JOIN
                         dbo.Tabla_UbicacionEjercicios ON dbo.Tabla_Ejercicios.id_Ejercicio = dbo.Tabla_UbicacionEjercicios.id_Ejercicio
GROUP BY dbo.Tabla_UbicacionEjercicios.ubicacionVideo, dbo.Tabla_Ejercicios.id_Ejercicio

GO
ALTER AUTHORIZATION ON [dbo].[Vista_MostrarEnunciadoDatalistWeb] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_MostrarListadoDeEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_MostrarListadoDeEjercicios]
AS
SELECT        dbo.Tabla_Ejercicios.id_Ejercicio, dbo.Tabla_UbicacionEjercicios.ubicacionVisible, dbo.Tabla_UbicacionEjercicios.ubicacionImprimible, dbo.Tabla_UbicacionEjercicios.ubicacionVideo, 
                         dbo.Tabla_EnunciadoEjercicios.enunciadoMath, dbo.Tabla_EnunciadoEjercicios.enunciadoLimpio
FROM            dbo.Tabla_Ejercicios INNER JOIN
                         dbo.Tabla_UbicacionEjercicios ON dbo.Tabla_Ejercicios.id_Ejercicio = dbo.Tabla_UbicacionEjercicios.id_Ejercicio INNER JOIN
                         dbo.Tabla_EnunciadoEjercicios ON dbo.Tabla_Ejercicios.id_Ejercicio = dbo.Tabla_EnunciadoEjercicios.id_Ejercicio

GO
ALTER AUTHORIZATION ON [dbo].[Vista_MostrarListadoDeEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_MostrarListadoMisEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_MostrarListadoMisEjercicios]
AS
SELECT        dbo.Tabla_MisEjercicios.id_CompraEjercicioExplicaicones, dbo.Tabla_MisEjercicios.id_Ejercicio, dbo.Tabla_MisEjercicios.ejercicio, dbo.Tabla_MisEjercicios.explicacion, dbo.Tabla_MisEjercicios.venvimiento, 
                         dbo.Tabla_MisEjercicios.fechaVencimiento, dbo.Tabla_MisEjercicios.id_Usuario, dbo.Tabla_Ejercicios.Titulo, dbo.Tabla_Empresa.empresa
FROM            dbo.Tabla_MisEjercicios INNER JOIN
                         dbo.Tabla_Usuario ON dbo.Tabla_MisEjercicios.id_Usuario = dbo.Tabla_Usuario.id_Usuario INNER JOIN
                         dbo.Tabla_Empresa ON dbo.Tabla_Usuario.id_Empresa = dbo.Tabla_Empresa.id_Empresa INNER JOIN
                         dbo.Tabla_Ejercicios ON dbo.Tabla_MisEjercicios.id_Ejercicio = dbo.Tabla_Ejercicios.id_Ejercicio

GO
ALTER AUTHORIZATION ON [dbo].[Vista_MostrarListadoMisEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_MostrarListadoMisExplicaciones]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_MostrarListadoMisExplicaciones]
AS
SELECT        dbo.Tabla_MisExplicaciones.id_CompraVideos, dbo.Tabla_MisExplicaciones.id_Ejercicio, dbo.Tabla_MisExplicaciones.video, dbo.Tabla_MisExplicaciones.vencimiento, 
                         dbo.Tabla_MisExplicaciones.fechaVencimiento, dbo.Tabla_MisExplicaciones.id_Usuario, dbo.Tabla_Ejercicios.Titulo, dbo.Tabla_Empresa.id_Empresa
FROM            dbo.Tabla_MisExplicaciones INNER JOIN
                         dbo.Tabla_Ejercicios ON dbo.Tabla_MisExplicaciones.id_Ejercicio = dbo.Tabla_Ejercicios.id_Ejercicio INNER JOIN
                         dbo.Tabla_Usuario ON dbo.Tabla_MisExplicaciones.id_Usuario = dbo.Tabla_Usuario.id_Usuario INNER JOIN
                         dbo.Tabla_Empresa ON dbo.Tabla_Usuario.id_Empresa = dbo.Tabla_Empresa.id_Empresa

GO
ALTER AUTHORIZATION ON [dbo].[Vista_MostrarListadoMisExplicaciones] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_Movimientos]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_Movimientos]
AS
SELECT        dbo.Tabla_Movimientos.id_Movimiento, dbo.Tabla_Movimientos.id_TipoMovimiento, dbo.Tabla_Movimientos.debe, dbo.Tabla_Movimientos.haber, dbo.Tabla_Movimientos.fechaMovimiento, 
                         dbo.Tabla_Usuario.correo, dbo.Tabla_DatosUsuario.telefono, dbo.Tabla_DatosUsuario.pais, dbo.Tabla_Usuario.id_Facebook, dbo.Tabla_Usuario.nameFacebook, dbo.Tabla_Usuario.id_Empresa, 
                         dbo.Tabla_DatosUsuario.id_Usuario, dbo.Tabla_TipoMovimientos.tipoMovimiento
FROM            dbo.Tabla_Usuario INNER JOIN
                         dbo.Tabla_DatosUsuario ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_DatosUsuario.id_Usuario INNER JOIN
                         dbo.Tabla_Movimientos ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_Movimientos.id_Usuario INNER JOIN
                         dbo.Tabla_TipoMovimientos ON dbo.Tabla_Movimientos.id_TipoMovimiento = dbo.Tabla_TipoMovimientos.id_TipoMovimiento

GO
ALTER AUTHORIZATION ON [dbo].[Vista_Movimientos] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_PanelControlUsuarioWeb]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_PanelControlUsuarioWeb]
AS
SELECT        dbo.Tabla_Usuario.id_Usuario, dbo.Tabla_Usuario.password, dbo.Tabla_Usuario.correo, dbo.Tabla_DatosUsuario.telefono, dbo.Tabla_DatosUsuario.modeloTelefono, dbo.Tabla_DatosUsuario.skype, 
                         dbo.Tabla_Usuario.id_Empresa, dbo.Tabla_DatosUsuario.pais
FROM            dbo.Tabla_Usuario INNER JOIN
                         dbo.Tabla_DatosUsuario ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_DatosUsuario.id_Usuario

GO
ALTER AUTHORIZATION ON [dbo].[Vista_PanelControlUsuarioWeb] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_PanelSaldoUsuarioWeb]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_PanelSaldoUsuarioWeb]
AS
SELECT        dbo.Tabla_Usuario.id_Usuario, dbo.Tabla_Movimientos.debe, dbo.Tabla_Movimientos.haber, dbo.Tabla_TipoMovimientos.tipoMovimiento, dbo.Tabla_Movimientos.fechaMovimiento, 
                         dbo.Tabla_Movimientos.id_Movimiento
FROM            dbo.Tabla_Movimientos INNER JOIN
                         dbo.Tabla_Usuario ON dbo.Tabla_Movimientos.id_Usuario = dbo.Tabla_Usuario.id_Usuario INNER JOIN
                         dbo.Tabla_TipoMovimientos ON dbo.Tabla_Movimientos.id_TipoMovimiento = dbo.Tabla_TipoMovimientos.id_TipoMovimiento

GO
ALTER AUTHORIZATION ON [dbo].[Vista_PanelSaldoUsuarioWeb] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_RecuperarContraseñaWeb]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_RecuperarContraseñaWeb]
AS
SELECT        dbo.Tabla_Usuario.correo, dbo.Tabla_Usuario.id_Empresa, dbo.Tabla_DatosExtraUsuario.bloqueoUsuario, dbo.Tabla_Usuario.password, dbo.Tabla_DatosUsuario.telefono
FROM            dbo.Tabla_Usuario INNER JOIN
                         dbo.Tabla_DatosExtraUsuario ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_DatosExtraUsuario.id_Usuario INNER JOIN
                         dbo.Tabla_DatosUsuario ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_DatosUsuario.id_Usuario

GO
ALTER AUTHORIZATION ON [dbo].[Vista_RecuperarContraseñaWeb] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_TarjetaPrepaga]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_TarjetaPrepaga]
AS
SELECT        dbo.Tabla_TarjetaPrepaga.id_Tarjeta, dbo.Tabla_TarjetaPrepaga.codigoTarjeta, dbo.Tabla_TarjetaPrepaga.valorTarjeta, dbo.Tabla_TarjetaPrepaga.vencimientoTarjeta, dbo.Tabla_TarjetaPrepaga.bloqueoTarjeta, 
                         dbo.Tabla_Empresa.empresa, dbo.Tabla_Empresa.id_Empresa
FROM            dbo.Tabla_Empresa INNER JOIN
                         dbo.Tabla_TarjetaPrepaga ON dbo.Tabla_Empresa.id_Empresa = dbo.Tabla_TarjetaPrepaga.id_Empresa

GO
ALTER AUTHORIZATION ON [dbo].[Vista_TarjetaPrepaga] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_UsuarioAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_UsuarioAdministrador]
AS
SELECT        dbo.Tabla_Usuario.id_Usuario, dbo.Tabla_Usuario.password, dbo.Tabla_Usuario.correo, dbo.Tabla_Empresa.id_Empresa, dbo.Tabla_Usuario.nameFacebook, dbo.Tabla_Empresa.empresa, 
                         dbo.Tabla_UsuarioCredito.creditoUsuario, dbo.Tabla_UsuarioCredito.prestamoReal, dbo.Tabla_UsuarioCredito.prestamoSOS, dbo.Tabla_DatosExtraUsuario.ofertaProximaCarga, 
                         dbo.Tabla_DatosExtraUsuario.bloqueoUsuario, dbo.Tabla_DatosUsuario.skype, dbo.Tabla_DatosUsuario.modeloTelefono, dbo.Tabla_DatosUsuario.telefono, dbo.Tabla_DatosUsuario.pais
FROM            dbo.Tabla_Empresa INNER JOIN
                         dbo.Tabla_Usuario ON dbo.Tabla_Empresa.id_Empresa = dbo.Tabla_Usuario.id_Empresa INNER JOIN
                         dbo.Tabla_DatosExtraUsuario ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_DatosExtraUsuario.id_Usuario INNER JOIN
                         dbo.Tabla_DatosUsuario ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_DatosUsuario.id_Usuario INNER JOIN
                         dbo.Tabla_UsuarioCredito ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_UsuarioCredito.id_Usuario

GO
ALTER AUTHORIZATION ON [dbo].[Vista_UsuarioAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  View [dbo].[Vista_UsuarioCredito]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE VIEW [dbo].[Vista_UsuarioCredito]
AS
SELECT        dbo.Tabla_Usuario.id_Usuario, dbo.Tabla_Usuario.id_Facebook, dbo.Tabla_Usuario.nameFacebook, dbo.Tabla_Usuario.correo, dbo.Tabla_DatosUsuario.telefono, dbo.Tabla_DatosUsuario.pais, 
                         dbo.Tabla_UsuarioCredito.creditoUsuario, dbo.Tabla_UsuarioCredito.prestamoReal, dbo.Tabla_UsuarioCredito.prestamoSOS, dbo.Tabla_Empresa.id_Empresa
FROM            dbo.Tabla_Empresa INNER JOIN
                         dbo.Tabla_Usuario ON dbo.Tabla_Empresa.id_Empresa = dbo.Tabla_Usuario.id_Empresa INNER JOIN
                         dbo.Tabla_UsuarioCredito ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_UsuarioCredito.id_Usuario INNER JOIN
                         dbo.Tabla_DatosUsuario ON dbo.Tabla_Usuario.id_Usuario = dbo.Tabla_DatosUsuario.id_Usuario

GO
ALTER AUTHORIZATION ON [dbo].[Vista_UsuarioCredito] TO  SCHEMA OWNER 
GO
/****** Object:  FullTextIndex     Script Date: 21/06/2016 2:15:10 ******/
CREATE FULLTEXT INDEX ON [dbo].[Tabla_Ano](
[ano] LANGUAGE 'Spanish')
KEY INDEX [PK_Tabla_Ano]ON ([Busquedas], FILEGROUP [PRIMARY])
WITH (CHANGE_TRACKING = AUTO, STOPLIST = OFF)


GO
/****** Object:  FullTextIndex     Script Date: 21/06/2016 2:15:10 ******/
CREATE FULLTEXT INDEX ON [dbo].[Tabla_BuquedasEjercicios](
[etiquetaAno] LANGUAGE 'Spanish', 
[etiquetaColegio] LANGUAGE 'Spanish', 
[etiquetaMateria] LANGUAGE 'Spanish', 
[etiquetaProfesor] LANGUAGE 'Spanish', 
[etiquetaTema] LANGUAGE 'Spanish')
KEY INDEX [PK_Tabla_BuquedaEjercicios]ON ([Busquedas], FILEGROUP [PRIMARY])
WITH (CHANGE_TRACKING = AUTO, STOPLIST = OFF)


GO
/****** Object:  FullTextIndex     Script Date: 21/06/2016 2:15:10 ******/
CREATE FULLTEXT INDEX ON [dbo].[Tabla_Colegio](
[colegio] LANGUAGE 'Spanish')
KEY INDEX [PK_Tabla_Colegio]ON ([Busquedas], FILEGROUP [PRIMARY])
WITH (CHANGE_TRACKING = AUTO, STOPLIST = OFF)


GO
/****** Object:  FullTextIndex     Script Date: 21/06/2016 2:15:10 ******/
CREATE FULLTEXT INDEX ON [dbo].[Tabla_EnunciadoEjercicios](
[enunciadoLimpio] LANGUAGE 'Spanish', 
[enunciadoMath] LANGUAGE 'Spanish')
KEY INDEX [PK_Tabla_EnunciadoEjercicios]ON ([Busquedas], FILEGROUP [PRIMARY])
WITH (CHANGE_TRACKING = AUTO, STOPLIST = OFF)


GO
/****** Object:  FullTextIndex     Script Date: 21/06/2016 2:15:10 ******/
CREATE FULLTEXT INDEX ON [dbo].[Tabla_Materia](
[materia] LANGUAGE 'Spanish')
KEY INDEX [PK_Tabla_Materia]ON ([Busquedas], FILEGROUP [PRIMARY])
WITH (CHANGE_TRACKING = AUTO, STOPLIST = OFF)


GO
/****** Object:  FullTextIndex     Script Date: 21/06/2016 2:15:10 ******/
CREATE FULLTEXT INDEX ON [dbo].[Tabla_Profesor](
[profesor] LANGUAGE 'Spanish')
KEY INDEX [PK_Tabla_Profesor]ON ([Busquedas], FILEGROUP [PRIMARY])
WITH (CHANGE_TRACKING = AUTO, STOPLIST = OFF)


GO
/****** Object:  FullTextIndex     Script Date: 21/06/2016 2:15:10 ******/
CREATE FULLTEXT INDEX ON [dbo].[Tabla_Tema](
[tema] LANGUAGE 'Spanish')
KEY INDEX [PK_Tabla_Tema]ON ([Busquedas], FILEGROUP [PRIMARY])
WITH (CHANGE_TRACKING = AUTO, STOPLIST = OFF)


GO
ALTER TABLE [dbo].[Tabla_Profesor] ADD  CONSTRAINT [DF_Tabla_Profesor_id_Profesor]  DEFAULT (NEXT VALUE FOR [secuancia_Profesor]) FOR [id_Profesor]
GO
ALTER TABLE [dbo].[Tabla_Administrador]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_Administrador_Tabla_Empresa] FOREIGN KEY([id_Empresa])
REFERENCES [dbo].[Tabla_Empresa] ([id_Empresa])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_Administrador] CHECK CONSTRAINT [FK_Tabla_Administrador_Tabla_Empresa]
GO
ALTER TABLE [dbo].[Tabla_BuquedasEjercicios]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_BuquedasEjercicios_Tabla_Ejercicios] FOREIGN KEY([id_Ejercicio])
REFERENCES [dbo].[Tabla_Ejercicios] ([id_Ejercicio])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_BuquedasEjercicios] CHECK CONSTRAINT [FK_Tabla_BuquedasEjercicios_Tabla_Ejercicios]
GO
ALTER TABLE [dbo].[Tabla_BuquedasEjercicios]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_BuquedasEjercicios_Tabla_TipoIntitucion] FOREIGN KEY([id_TipoInstitucion])
REFERENCES [dbo].[Tabla_TipoIntitucion] ([id_TipoInstitucion])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_BuquedasEjercicios] CHECK CONSTRAINT [FK_Tabla_BuquedasEjercicios_Tabla_TipoIntitucion]
GO
ALTER TABLE [dbo].[Tabla_ConsultaAdministradores]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_ConsultaAdministradores_Tabla_Administrador] FOREIGN KEY([id_Administrador])
REFERENCES [dbo].[Tabla_Administrador] ([id_Administrador])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_ConsultaAdministradores] CHECK CONSTRAINT [FK_Tabla_ConsultaAdministradores_Tabla_Administrador]
GO
ALTER TABLE [dbo].[Tabla_DatosExtraUsuario]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_DatosExtraUsuario_Tabla_Usuario] FOREIGN KEY([id_Usuario])
REFERENCES [dbo].[Tabla_Usuario] ([id_Usuario])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_DatosExtraUsuario] CHECK CONSTRAINT [FK_Tabla_DatosExtraUsuario_Tabla_Usuario]
GO
ALTER TABLE [dbo].[Tabla_DatosUsuario]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_DatosUsuario_Tabla_Usuario] FOREIGN KEY([id_Usuario])
REFERENCES [dbo].[Tabla_Usuario] ([id_Usuario])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_DatosUsuario] CHECK CONSTRAINT [FK_Tabla_DatosUsuario_Tabla_Usuario]
GO
ALTER TABLE [dbo].[Tabla_DuracionProductos]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_DuracionProductos_Tabla_Empresa] FOREIGN KEY([id_Empresa])
REFERENCES [dbo].[Tabla_Empresa] ([id_Empresa])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_DuracionProductos] CHECK CONSTRAINT [FK_Tabla_DuracionProductos_Tabla_Empresa]
GO
ALTER TABLE [dbo].[Tabla_EnunciadoEjercicios]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_EnunciadoEjercicios_Tabla_Ejercicios] FOREIGN KEY([id_Ejercicio])
REFERENCES [dbo].[Tabla_Ejercicios] ([id_Ejercicio])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_EnunciadoEjercicios] CHECK CONSTRAINT [FK_Tabla_EnunciadoEjercicios_Tabla_Ejercicios]
GO
ALTER TABLE [dbo].[Tabla_MensajeAdministrador]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_MensajeAdministrador_Tabla_Administrador] FOREIGN KEY([id_Administrador])
REFERENCES [dbo].[Tabla_Administrador] ([id_Administrador])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_MensajeAdministrador] CHECK CONSTRAINT [FK_Tabla_MensajeAdministrador_Tabla_Administrador]
GO
ALTER TABLE [dbo].[Tabla_MisEjercicios]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_MisEjercicios_Tabla_Ejercicios] FOREIGN KEY([id_Ejercicio])
REFERENCES [dbo].[Tabla_Ejercicios] ([id_Ejercicio])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_MisEjercicios] CHECK CONSTRAINT [FK_Tabla_MisEjercicios_Tabla_Ejercicios]
GO
ALTER TABLE [dbo].[Tabla_MisEjercicios]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_MisEjercicios_Tabla_Usuario] FOREIGN KEY([id_Usuario])
REFERENCES [dbo].[Tabla_Usuario] ([id_Usuario])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_MisEjercicios] CHECK CONSTRAINT [FK_Tabla_MisEjercicios_Tabla_Usuario]
GO
ALTER TABLE [dbo].[Tabla_MisExplicaciones]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_MisExplicaciones_Tabla_Ejercicios] FOREIGN KEY([id_Ejercicio])
REFERENCES [dbo].[Tabla_Ejercicios] ([id_Ejercicio])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_MisExplicaciones] CHECK CONSTRAINT [FK_Tabla_MisExplicaciones_Tabla_Ejercicios]
GO
ALTER TABLE [dbo].[Tabla_MisExplicaciones]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_MisExplicaciones_Tabla_Usuario] FOREIGN KEY([id_Usuario])
REFERENCES [dbo].[Tabla_Usuario] ([id_Usuario])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_MisExplicaciones] CHECK CONSTRAINT [FK_Tabla_MisExplicaciones_Tabla_Usuario]
GO
ALTER TABLE [dbo].[Tabla_Movimientos]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_Movimientos_Tabla_TipoMovimientos] FOREIGN KEY([id_TipoMovimiento])
REFERENCES [dbo].[Tabla_TipoMovimientos] ([id_TipoMovimiento])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_Movimientos] CHECK CONSTRAINT [FK_Tabla_Movimientos_Tabla_TipoMovimientos]
GO
ALTER TABLE [dbo].[Tabla_Movimientos]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_Movimientos_Tabla_Usuario] FOREIGN KEY([id_Usuario])
REFERENCES [dbo].[Tabla_Usuario] ([id_Usuario])
GO
ALTER TABLE [dbo].[Tabla_Movimientos] CHECK CONSTRAINT [FK_Tabla_Movimientos_Tabla_Usuario]
GO
ALTER TABLE [dbo].[Tabla_Ofertas]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_Ofertas_Tabla_Empresa] FOREIGN KEY([id_Empresa])
REFERENCES [dbo].[Tabla_Empresa] ([id_Empresa])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_Ofertas] CHECK CONSTRAINT [FK_Tabla_Ofertas_Tabla_Empresa]
GO
ALTER TABLE [dbo].[Tabla_PedidoEjercicioVideo]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_PedidoEjercicioVideo_Tabla_Usuario] FOREIGN KEY([id_Usuario])
REFERENCES [dbo].[Tabla_Usuario] ([id_Usuario])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_PedidoEjercicioVideo] CHECK CONSTRAINT [FK_Tabla_PedidoEjercicioVideo_Tabla_Usuario]
GO
ALTER TABLE [dbo].[Tabla_PedidoExplicacion]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_PedidoExplicacion_Tabla_Usuario] FOREIGN KEY([id_Usuario])
REFERENCES [dbo].[Tabla_Usuario] ([id_Usuario])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_PedidoExplicacion] CHECK CONSTRAINT [FK_Tabla_PedidoExplicacion_Tabla_Usuario]
GO
ALTER TABLE [dbo].[Tabla_PreguntaClientes]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_PreguntaClientes_Tabla_Empresa] FOREIGN KEY([id_Empresa])
REFERENCES [dbo].[Tabla_Empresa] ([id_Empresa])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_PreguntaClientes] CHECK CONSTRAINT [FK_Tabla_PreguntaClientes_Tabla_Empresa]
GO
ALTER TABLE [dbo].[Tabla_TarjetaPrepaga]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_TarjetaPrepaga_Tabla_Empresa] FOREIGN KEY([id_Empresa])
REFERENCES [dbo].[Tabla_Empresa] ([id_Empresa])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_TarjetaPrepaga] CHECK CONSTRAINT [FK_Tabla_TarjetaPrepaga_Tabla_Empresa]
GO
ALTER TABLE [dbo].[Tabla_UbicacionEjercicios]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_UbicacionEjercicios_Tabla_Ejercicios] FOREIGN KEY([id_Ejercicio])
REFERENCES [dbo].[Tabla_Ejercicios] ([id_Ejercicio])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_UbicacionEjercicios] CHECK CONSTRAINT [FK_Tabla_UbicacionEjercicios_Tabla_Ejercicios]
GO
ALTER TABLE [dbo].[Tabla_Usuario]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_Usuario_Tabla_Empresa] FOREIGN KEY([id_Empresa])
REFERENCES [dbo].[Tabla_Empresa] ([id_Empresa])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_Usuario] CHECK CONSTRAINT [FK_Tabla_Usuario_Tabla_Empresa]
GO
ALTER TABLE [dbo].[Tabla_UsuarioCredito]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_UsuarioCredito_Tabla_Usuario] FOREIGN KEY([id_Usuario])
REFERENCES [dbo].[Tabla_Usuario] ([id_Usuario])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_UsuarioCredito] CHECK CONSTRAINT [FK_Tabla_UsuarioCredito_Tabla_Usuario]
GO
ALTER TABLE [dbo].[Tabla_ValorOfertas]  WITH CHECK ADD  CONSTRAINT [FK_Tabla_ValorOfertas_Tabla_Empresa] FOREIGN KEY([id_Empresa])
REFERENCES [dbo].[Tabla_Empresa] ([id_Empresa])
ON UPDATE CASCADE
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[Tabla_ValorOfertas] CHECK CONSTRAINT [FK_Tabla_ValorOfertas_Tabla_Empresa]
GO
/****** Object:  StoredProcedure [dbo].[actualizar_PedidoEjercicioVideo]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[actualizar_PedidoEjercicioVideo] (@id_Administrador int, @realizadoOKPedidoEjercicioVideo bit, @id_PedidoEjercicioVideo int,@empresa int) as

Begin try

	if @empresa = 0

		begin

			if @id_Administrador = 0

				begin

					update Tabla_PedidoEjercicioVideo set id_Administrador = null, realizadoOKPedidoEjercicioVideo = @realizadoOKPedidoEjercicioVideo where id_PedidoEjercicioVideo = @id_PedidoEjercicioVideo 

					return

				end

			update Tabla_PedidoEjercicioVideo set id_Administrador = @id_Administrador, realizadoOKPedidoEjercicioVideo = @realizadoOKPedidoEjercicioVideo where id_PedidoEjercicioVideo = @id_PedidoEjercicioVideo 

			return

		end
		
	if @id_Administrador = 0

		begin

			update Tabla_PedidoEjercicioVideo set id_Administrador = null, realizadoOKPedidoEjercicioVideo = @realizadoOKPedidoEjercicioVideo where id_PedidoEjercicioVideo = @id_PedidoEjercicioVideo and id_Empresa = @empresa

			return

		end	
		
	update Tabla_PedidoEjercicioVideo set id_Administrador = @id_Administrador, realizadoOKPedidoEjercicioVideo = @realizadoOKPedidoEjercicioVideo where id_PedidoEjercicioVideo = @id_PedidoEjercicioVideo and id_Empresa = @empresa

	return 

End try

Begin Catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[actualizar_PedidoEjercicioVideo] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[actualizarAdministrador](@id_administrador int, @contrasenaAdministrador nvarchar(10)) as

begin try

	update Tabla_Administrador set contrasenaAdministrador = @contrasenaAdministrador where id_Administrador = @id_administrador

end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[actualizarAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarAdministradorCategoria]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[actualizarAdministradorCategoria] (@id_Administrador int, @a1 int, @a2 int, @a3 int, @u1 int, @u2 int, @p1 int, @p2 int, @p3 int, @p4 int,@ce1 int, @ce2 int, @ie1 int, @ie2 int, @c1 int, @c2 int, @c3 int, @c4 int, @c5 int,@ep1 int, @ep2 int) as

Begin try

	update Tabla_Categoria set a1 = @a1 ,a2 = @a2 , a3 = @a3 , u1 = @u1 ,u2 = @u2 ,p1 = @p1 , p2 = @p2 , p3 = @p3 , p4 = @p4 , ce1 = @ce1 , ce2 = @ce2 , ie1 = @ie1 , ie2= @ie2 ,c1 = @c1,c2 = @c2,c3 = @c3,c4 = @c4,c5 = @c5,ep1 = @ep1,ep2 = @ep2 where id_Administrador = @id_Administrador 
		
end try

begin catch

	return -6;

end catch
GO
ALTER AUTHORIZATION ON [dbo].[actualizarAdministradorCategoria] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarEjercicio]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[actualizarEjercicio] (@titulo nvarchar(50),@id_TipoEjercicio int,@id_TipoInstitucion int, @explicacionRealizada bit,@enunciadoMATH nvarchar(max),@enunciadoLimpio nvarchar(max), @ubicacionRespuestaImprimible nvarchar(40), @ubicacionRespuestaVisible nvarchar(100),@ubicacionVideos nvarchar(40),@etiquetaAno nvarchar(60),@etiquetaColegio nvarchar(60),@etiquetaMateria nvarchar(60),@etiquetaProfesor nvarchar(60),@etiquetaTema nvarchar(60),@id_Ejercicio int) as

begin try

	if exists (select id_Ejercicio from Tabla_Ejercicios where id_Ejercicio = @id_Ejercicio)

		begin

			return 0

		end

	Update Tabla_Ejercicios set Titulo = @Titulo,@id_TipoEjercicio = @id_TipoEjercicio, @id_TipoInstitucion = @id_TipoInstitucion,explicacionRealizada = @explicacionRealizada where id_Ejercicio = @id_Ejercicio

	Update Tabla_EnunciadoEjercicios set enunciadoMATH = @enunciadoMATH,enunciadoLimpio = @enunciadoLimpio where id_Ejercicio = @id_Ejercicio

	Update Tabla_UbicacionEjercicios set ubicacionImprimible = @ubicacionRespuestaImprimible,ubicacionVisible = @ubicacionRespuestaVisible, ubicacionVideo = @ubicacionVideos where id_Ejercicio = @id_Ejercicio

	Update Tabla_BuquedasEjercicios set etiquetaAno = @etiquetaAno, etiquetaColegio = @etiquetaColegio ,etiquetaMateria = @etiquetaMateria, etiquetaProfesor = @etiquetaProfesor,etiquetaTema = @etiquetaTema where id_Ejercicio = @id_Ejercicio

	return 1

end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[actualizarEjercicio] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarEmpresa]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[actualizarEmpresa] (@id_Empresa int, @empresa nvarchar(10)) as

begin try

	update Tabla_Empresa set empresa = @empresa where id_Empresa = @id_Empresa

end try

begin catch

	return -6

end catch

GO
ALTER AUTHORIZATION ON [dbo].[actualizarEmpresa] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarMisEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[actualizarMisEjercicios] (@id_CompraEjercicioExplicaciones int, @ejercicio bit,@explicacion bit,@vencimiento int) as

begin try

	update Tabla_MisEjercicios set ejercicio = @ejercicio, explicacion = @explicacion, venvimiento = @vencimiento, fechaVencimiento = DATEADD(day, @vencimiento, getdate()) where id_CompraEjercicioExplicaicones = @id_CompraEjercicioExplicaciones
	
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[actualizarMisEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarMisExplicaciones]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[actualizarMisExplicaciones] (@id_CompraVideos int, @vencimiento int) as

begin try

	update Tabla_MisExplicaciones set vencimiento = @vencimiento, fechaVencimiento = DATEADD(day, @vencimiento, getdate()) where id_CompraVideos = @id_CompraVideos
	
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[actualizarMisExplicaciones] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarOfertas]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[actualizarOfertas] (@id_Empresa int, @oferta_1PrestamoSOS bit,@oferta_2registro bit, @oferta_3ProximaCarga bit, @oferta_4AumentoCarga bit, @oferta_5RegaloCarga bit,@oferta_6DosXUno bit,@oferta_7DosXUnoIgualProducto bit, @oferta_8Gratis bit, @oferta_9DescuentoSegundo bit, @oferta_10BonificaciónHabitue bit,@oferta_11AumentoDiasCompras bit,@oferta_12AumentoDiasTodasCompras bit,@oferta_13DescuentoCompra bit,@oferta_14ImpresionGratis bit,@oferta_15VideosGratis bit,@oferta_16EjerciciosGratis bit,@oferta_17ExplicacionesGratis bit) as

begin try

	update Tabla_Ofertas set oferta_1PrestamoSOS = @oferta_1PrestamoSOS, oferta_2Registro = @oferta_2registro, oferta_3ProximaCarga = @oferta_3ProximaCarga, oferta_4AumentoCarga = @oferta_4AumentoCarga, oferta_5RegaloCarga = @oferta_5RegaloCarga, oferta_6DosXUno = @oferta_6DosXUno, oferta_7DosXUnoIgualProducto = @oferta_7DosXUnoIgualProducto, oferta_8Gratis = @oferta_8Gratis, oferta_9DescuentoSegundo = @oferta_9DescuentoSegundo, oferta_10BonificaciónHabitue = @oferta_10BonificaciónHabitue,oferta_11AumentoDiasCompras = @oferta_11AumentoDiasCompras,oferta_12AumentoDiasTodasCompras = @oferta_12AumentoDiasTodasCompras,oferta_13DescuentoCompra = @oferta_13DescuentoCompra,oferta_14ImpresionGratis = @oferta_14ImpresionGratis,oferta_15VideosGratis = @oferta_15VideosGratis, oferta_16EjerciciosGratis = @oferta_16EjerciciosGratis, oferta_17ExplicacionesGratis = @oferta_17ExplicacionesGratis where id_Empresa = @id_Empresa

end try

begin catch

	return -6

end catch

GO
ALTER AUTHORIZATION ON [dbo].[actualizarOfertas] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarPrecios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[actualizarPrecios] (@id_Empresa int,@duracionVideos int,@duracionEjercicios int, @precioVideo decimal(18,2),@precioEjercicio decimal(18,2),@precioExplicacion decimal(18,2),@precioImpresion decimal(18,2), @recargaHabitue decimal(18,2), @ejerciciosCompradosHabitue int) as

begin try

	update Tabla_DuracionProductos set duracionEjercicios = @duracionEjercicios, duracionVideos = @duracionVideos, precioVideo = @precioVideo, precioExplicacion = @precioExplicacion, precioImpresion = @precioImpresion, precioEjercicio = @precioEjercicio, recargaHabitue = @recargaHabitue, ejerciciosCompradosHabitue = @ejerciciosCompradosHabitue where id_Empresa = @id_Empresa

end try

begin catch

	return -6

end catch

GO
ALTER AUTHORIZATION ON [dbo].[actualizarPrecios] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarSecuenciaAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[actualizarSecuenciaAdministrador] as

begin try

	Declare @cantidad int

	Declare @i int

	Declare @j int

	set @i = 1

	set @j = 0

	Declare @auxiliar int
		
	select @cantidad = MAX(id_Administrador) from Tabla_Administrador

	while (@i <= @cantidad)

		Begin

			if exists (select id_Administrador from Tabla_Administrador where id_Administrador = @i) and @j <> 0

				begin

					update Tabla_Administrador set id_Administrador = @i - @j where id_Administrador = @i
			
				end 
			
			if not exists (select id_Administrador from Tabla_Administrador where id_Administrador = @i)

				begin

					set @j = 1
			
				end 

			set @i = @i + 1 

			if @i > @cantidad
				
				begin

					select @auxiliar = COUNT(id_Administrador) from Tabla_Administrador

					select @cantidad = MAX(id_Administrador) from Tabla_Administrador

					if @auxiliar <> @cantidad

						begin
	
							set @i = 1

							set @j = 0

						end
				end
	End
	
	return	
	
end try


begin catch

	return -6

end catch 
GO
ALTER AUTHORIZATION ON [dbo].[actualizarSecuenciaAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarSecuenciaConsultaAdministradores]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
/****** Object:  StoredProcedure [dbo].[actualizarSecuenciaMensajeAdministrador]    Script Date: 02/06/2016 16:23:09 ******/
create proc [dbo].[actualizarSecuenciaConsultaAdministradores] as

begin try

	Declare @cantidad int

	Declare @i int

	Declare @j int

	set @i = 1

	set @j = 0

	Declare @auxiliar int
		
	select @cantidad = MAX(id_ConsultaAdministrador) from Tabla_ConsultaAdministradores

	while (@i <= @cantidad)

		Begin

			if exists (select id_ConsultaAdministrador from Tabla_ConsultaAdministradores where id_ConsultaAdministrador = @i) and @j <> 0

				begin

					update Tabla_ConsultaAdministradores set id_ConsultaAdministrador = @i - @j where id_ConsultaAdministrador = @i
			
				end 
			
			if not exists (select id_ConsultaAdministrador from Tabla_ConsultaAdministradores where id_ConsultaAdministrador = @i)

				begin

					set @j = 1
			
				end 

			set @i = @i + 1 

			if @i > @cantidad
				
				begin

					select @auxiliar = COUNT(id_ConsultaAdministrador) from Tabla_ConsultaAdministradores

					select @cantidad = MAX(id_ConsultaAdministrador) from Tabla_ConsultaAdministradores

					if @auxiliar <> @cantidad

						begin
	
							set @i = 1

							set @j = 0

						end
				end
	End
	
	return	
	
end try


begin catch

	return -6

end catch 
GO
ALTER AUTHORIZATION ON [dbo].[actualizarSecuenciaConsultaAdministradores] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarSecuenciaMensajeAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
/****** Object:  StoredProcedure [dbo].[actualizarSecuenciaAdministrador]    Script Date: 02/06/2016 14:34:36 ******/
create proc [dbo].[actualizarSecuenciaMensajeAdministrador] as

begin try

	Declare @cantidad int

	Declare @i int

	Declare @j int

	set @i = 1

	set @j = 0

	Declare @auxiliar int
		
	select @cantidad = MAX(id_MensajeAdministrador) from Tabla_MensajeAdministrador

	while (@i <= @cantidad)

		Begin

			if exists (select id_MensajeAdministrador from Tabla_MensajeAdministrador where id_MensajeAdministrador = @i) and @j <> 0

				begin

					update Tabla_MensajeAdministrador set id_MensajeAdministrador = @i - @j where id_MensajeAdministrador = @i
			
				end 
			
			if not exists (select id_MensajeAdministrador from Tabla_MensajeAdministrador where id_MensajeAdministrador = @i)

				begin

					set @j = 1
			
				end 

			set @i = @i + 1 

			if @i > @cantidad
				
				begin

					select @auxiliar = COUNT(id_MensajeAdministrador) from Tabla_MensajeAdministrador

					select @cantidad = MAX(id_MensajeAdministrador) from Tabla_MensajeAdministrador

					if @auxiliar <> @cantidad

						begin
	
							set @i = 1

							set @j = 0

						end
				end
	End
	
	return	
	
end try


begin catch

	return -6

end catch 
GO
ALTER AUTHORIZATION ON [dbo].[actualizarSecuenciaMensajeAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarSecuenciaMisEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
Create proc [dbo].[actualizarSecuenciaMisEjercicios] as

begin try

	Declare @cantidad int

	Declare @i int

	Declare @j int

	set @i = 1

	set @j = 0

	Declare @auxiliar int
		
	select @cantidad = MAX(id_CompraEjercicioExplicaicones) from Tabla_MisEjercicios

	while (@i <= @cantidad)

		Begin

			if exists (select id_CompraEjercicioExplicaicones from Tabla_MisEjercicios where id_CompraEjercicioExplicaicones = @i) and @j <> 0

				begin

					update Tabla_MisEjercicios set id_CompraEjercicioExplicaicones = @i - @j where id_CompraEjercicioExplicaicones = @i
			
				end 
			
			if not exists (select id_CompraEjercicioExplicaicones from Tabla_MisEjercicios where id_CompraEjercicioExplicaicones = @i)

				begin

					set @j = 1
			
				end 

			set @i = @i + 1 

			if @i > @cantidad
				
				begin

					select @auxiliar = COUNT(id_CompraEjercicioExplicaicones) from Tabla_MisEjercicios

					select @cantidad = MAX(id_CompraEjercicioExplicaicones) from Tabla_MisEjercicios

					if @auxiliar <> @cantidad

						begin
	
							set @i = 1

							set @j = 0

						end
				end
	End
	
	return	
	
end try


begin catch

	return -6

end catch 
GO
ALTER AUTHORIZATION ON [dbo].[actualizarSecuenciaMisEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarSecuenciaMisExplicaciones]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
Create proc [dbo].[actualizarSecuenciaMisExplicaciones] as

begin try

	Declare @cantidad int

	Declare @i int

	Declare @j int

	set @i = 1

	set @j = 0

	Declare @auxiliar int
		
	select @cantidad = MAX(id_CompraVideos) from Tabla_MisExplicaciones

	while (@i <= @cantidad)

		Begin

			if exists (select id_CompraVideos from Tabla_MisExplicaciones where id_CompraVideos = @i) and @j <> 0

				begin

					update Tabla_MisExplicaciones set id_CompraVideos = @i - @j where id_CompraVideos = @i
			
				end 
			
			if not exists (select id_CompraVideos from Tabla_MisExplicaciones where id_CompraVideos = @i)

				begin

					set @j = 1
			
				end 

			set @i = @i + 1 

			if @i > @cantidad
				
				begin

					select @auxiliar = COUNT(id_CompraVideos) from Tabla_MisExplicaciones

					select @cantidad = MAX(id_CompraVideos) from Tabla_MisExplicaciones

					if @auxiliar <> @cantidad

						begin
	
							set @i = 1

							set @j = 0

						end
				end
	End
	
	return	
	
end try


begin catch

	return -6

end catch 
GO
ALTER AUTHORIZATION ON [dbo].[actualizarSecuenciaMisExplicaciones] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarSecuenciaMovimientos]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[actualizarSecuenciaMovimientos] as

begin try

	Declare @cantidad int

	Declare @i int

	Declare @j int

	set @i = 1

	set @j = 0

	Declare @auxiliar int
		
	select @cantidad = MAX(id_Movimiento) from Tabla_Movimientos

	while (@i <= @cantidad)

		Begin

			if exists (select id_Movimiento from Tabla_Movimientos where id_Movimiento = @i) and @j <> 0

				begin

					update Tabla_Movimientos set id_Movimiento = @i - @j where id_Movimiento = @i
			
				end 
			
			if not exists (select id_Movimiento from Tabla_Movimientos where id_Movimiento = @i)

				begin

					set @j = 1
			
				end 

			set @i = @i + 1 

			if @i > @cantidad
				
				begin

					select @auxiliar = COUNT(id_Movimiento) from Tabla_Movimientos

					select @cantidad = MAX(id_Movimiento) from Tabla_Movimientos

					if @auxiliar <> @cantidad

						begin
	
							set @i = 1

							set @j = 0

						end
				end
	End
	
	return	
	
end try


begin catch

	return -6

end catch 
GO
ALTER AUTHORIZATION ON [dbo].[actualizarSecuenciaMovimientos] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarSecuenciaPedidoEjercicioVideo]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[actualizarSecuenciaPedidoEjercicioVideo] as

begin try

	Declare @cantidad int

	Declare @i int

	Declare @j int

	set @i = 1

	set @j = 0

	Declare @auxiliar int
		
	select @cantidad = MAX(id_PedidoEjercicioVideo) from Tabla_PedidoEjercicioVideo

	while (@i <= @cantidad)

		Begin

			if exists (select id_PedidoEjercicioVideo from Tabla_PedidoEjercicioVideo where id_PedidoEjercicioVideo = @i) and @j <> 0

				begin

					update Tabla_PedidoEjercicioVideo set id_PedidoEjercicioVideo = @i - @j where id_PedidoEjercicioVideo = @i
			
				end 
			
			if not exists (select id_PedidoEjercicioVideo from Tabla_PedidoEjercicioVideo where id_PedidoEjercicioVideo = @i)

				begin

					set @j = 1
			
				end 

			set @i = @i + 1 

			if @i > @cantidad
				
				begin

					select @auxiliar = COUNT(id_PedidoEjercicioVideo) from Tabla_PedidoEjercicioVideo

					select @cantidad = MAX(id_PedidoEjercicioVideo) from Tabla_PedidoEjercicioVideo

					if @auxiliar <> @cantidad

						begin
	
							set @i = 1

							set @j = 0

						end
				end
	End
	
	return	
	
end try


begin catch

	return -6

end catch 
GO
ALTER AUTHORIZATION ON [dbo].[actualizarSecuenciaPedidoEjercicioVideo] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarSecuenciaPedidoExplicacion]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[actualizarSecuenciaPedidoExplicacion] as

begin try

	Declare @cantidad int

	Declare @i int

	Declare @j int

	set @i = 1

	set @j = 0

	Declare @auxiliar int
		
	select @cantidad = MAX(id_PedidoExplicacion) from Tabla_PedidoExplicacion

	while (@i <= @cantidad)

		Begin

			if exists (select id_PedidoExplicacion from Tabla_PedidoExplicacion where id_PedidoExplicacion = @i) and @j <> 0

				begin

					update Tabla_PedidoExplicacion set id_PedidoExplicacion = @i - @j where id_PedidoExplicacion = @i
			
				end 
			
			if not exists (select id_PedidoExplicacion from Tabla_PedidoExplicacion where id_PedidoExplicacion = @i)

				begin

					set @j = 1
			
				end 

			set @i = @i + 1 

			if @i > @cantidad
				
				begin

					select @auxiliar = COUNT(id_PedidoExplicacion) from Tabla_PedidoExplicacion

					select @cantidad = MAX(id_PedidoExplicacion) from Tabla_PedidoExplicacion

					if @auxiliar <> @cantidad

						begin
	
							set @i = 1

							set @j = 0

						end
				end
	End
	
	return	
	
end try


begin catch

	return -6

end catch 
GO
ALTER AUTHORIZATION ON [dbo].[actualizarSecuenciaPedidoExplicacion] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarSecuenciaPreguntaClientes]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[actualizarSecuenciaPreguntaClientes] as

begin try

	Declare @cantidad int

	Declare @i int

	Declare @j int

	set @i = 1

	set @j = 0

	Declare @auxiliar int
		
	select @cantidad = MAX(id_PreguntaUsuario) from Tabla_PreguntaClientes

	while (@i <= @cantidad)

		Begin

			if exists (select id_PreguntaUsuario from Tabla_PreguntaClientes where id_PreguntaUsuario = @i) and @j <> 0

				begin

					update Tabla_PreguntaClientes set id_PreguntaUsuario = @i - @j where id_PreguntaUsuario = @i
			
				end 
			
			if not exists (select id_PreguntaUsuario from Tabla_PreguntaClientes where id_PreguntaUsuario = @i)

				begin

					set @j = 1
			
				end 

			set @i = @i + 1 

			if @i > @cantidad
				
				begin

					select @auxiliar = COUNT(id_PreguntaUsuario) from Tabla_PreguntaClientes

					select @cantidad = MAX(id_PreguntaUsuario) from Tabla_PreguntaClientes

					if @auxiliar <> @cantidad

						begin
	
							set @i = 1

							set @j = 0

						end
				end
	End
	
	return	
	
end try


begin catch

	return -6

end catch 
GO
ALTER AUTHORIZATION ON [dbo].[actualizarSecuenciaPreguntaClientes] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarSecuenciaTarjetaPrepaga]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[actualizarSecuenciaTarjetaPrepaga] as

begin try

	Declare @cantidad int

	Declare @i int

	Declare @j int

	set @i = 1

	set @j = 0

	Declare @auxiliar int
		
	select @cantidad = MAX(id_Tarjeta) from Tabla_TarjetaPrepaga

	while (@i <= @cantidad)

		Begin

			if exists (select id_Tarjeta from Tabla_TarjetaPrepaga where id_Tarjeta = @i) and @j <> 0

				begin

					update Tabla_TarjetaPrepaga set id_Tarjeta = @i - @j where id_Tarjeta = @i
			
				end 
			
			if not exists (select id_Tarjeta from Tabla_TarjetaPrepaga where id_Tarjeta = @i)

				begin

					set @j = 1
			
				end 

			set @i = @i + 1 

			if @i > @cantidad
				
				begin

					select @auxiliar = COUNT(id_Tarjeta) from Tabla_TarjetaPrepaga

					select @cantidad = MAX(id_Tarjeta) from Tabla_TarjetaPrepaga

					if @auxiliar <> @cantidad

						begin
	
							set @i = 1

							set @j = 0

						end
				end
	End
	
	return	
	
end try


begin catch

	return -6

end catch 
GO
ALTER AUTHORIZATION ON [dbo].[actualizarSecuenciaTarjetaPrepaga] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarSecuenciaUsuario]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[actualizarSecuenciaUsuario] as

begin try

	Declare @cantidad int

	Declare @i int

	Declare @j int

	set @i = 1

	set @j = 0

	Declare @auxiliar int
		
	select @cantidad = MAX(id_Usuario) from Tabla_Usuario

	while (@i <= @cantidad)

		Begin

			if exists (select id_Usuario from Tabla_Usuario where id_Usuario = @i) and @j <> 0

				begin

					update Tabla_Usuario set id_Usuario = @i - @j where id_Usuario = @i

					update Tabla_DatosUsuario set id_Usuario = @i - @j where id_Usuario = @i

					update Tabla_DatosExtraUsuario set id_Usuario = @i - @j where id_Usuario = @i

					update Tabla_UsuarioCredito set id_Usuario = @i - @j where id_Usuario = @i

				end 
			
			if not exists (select id_Usuario from Tabla_Usuario where id_Usuario = @i)

				begin

					set @j = 1
			
				end 

			set @i = @i + 1 

			if @i > @cantidad
				
				begin

					select @auxiliar = COUNT(id_Usuario) from Tabla_Usuario

					select @cantidad = MAX(id_Usuario) from Tabla_Usuario

					if @auxiliar <> @cantidad

						begin
	
							set @i = 1

							set @j = 0

						end
				end
	End
	
	return	
	
end try


begin catch

	return -6

end catch 
GO
ALTER AUTHORIZATION ON [dbo].[actualizarSecuenciaUsuario] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarSupervisoresDios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[actualizarSupervisoresDios](@id_administrador int, @contrasenaAdministrador nvarchar(10), @bloqueo bit) as

begin try

	update Tabla_Administrador set contrasenaAdministrador = @contrasenaAdministrador, bloqueo = @bloqueo where id_Administrador = @id_administrador

end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[actualizarSupervisoresDios] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarTarjetaPrepaga]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[actualizarTarjetaPrepaga] (@id_Tarjeta int, @bloqueoTarjeta bit, @vencimientoTarjeta datetime) as

begin try

	update Tabla_TarjetaPrepaga set bloqueoTarjeta = @bloqueoTarjeta, vencimientoTarjeta = @vencimientoTarjeta where id_Tarjeta = @id_Tarjeta

end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[actualizarTarjetaPrepaga] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarUsuario]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[actualizarUsuario] (@id_Usuario int, @bloqueoUsuario bit, @telefono nvarchar(20), @pais int) as

Begin try
	
	update Tabla_DatosUsuario set pais = @pais , telefono = @telefono where id_Usuario = @id_Usuario

	update Tabla_DatosExtraUsuario set bloqueoUsuario = @bloqueoUsuario where id_Usuario = @id_Usuario

	return

end try


Begin catch
	
	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[actualizarUsuario] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[actualizarValorOfertas]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[actualizarValorOfertas] (@id_Empresa int, @oferta_1ValorPrestamoSOS decimal(8,2),@oferta_2ValorRegistro decimal(8,2), @oferta_3ValorProximaCarga int, @oferta_4ValorAumentoCarga int, @oferta_5ValorRegaloCarga decimal(8,2),@oferta_6ValorDosXUno bit,@oferta_7ValorDosXUnoIgualProducto bit, @oferta_8ValorGratis int, @oferta_9ValorDescuentoSegundo decimal(8,2),@oferta_11ValorAumentoDiasCompras int,@oferta_12ValorAumentoDiasTodasCompras int,@oferta_13ValorDescuentoCompra decimal(8,2),@oferta_14ValorImpresionGratis int,@oferta_15ValorVideoGratis int,@oferta_16ValorEjerciciosGratis int,@oferta_17ValorExplicacionesGratis int) as

begin try

	update Tabla_ValorOfertas set oferta_1ValorPrestamoSOS = @oferta_1ValorPrestamoSOS, oferta_2ValorRegistro = @oferta_2ValorRegistro, oferta_3ValorProximaCarga = @oferta_3ValorProximaCarga, oferta_4ValorAumentoCarga = @oferta_4ValorAumentoCarga, oferta_5ValorRegaloCarga = @oferta_5ValorRegaloCarga, oferta_6ValorDosXUno = @oferta_6ValorDosXUno, oferta_7ValorDosXUnoIgualProducto = @oferta_7ValorDosXUnoIgualProducto, oferta_8ValorGratis = @oferta_8ValorGratis, oferta_9ValorDescuentoSegundo = @oferta_9ValorDescuentoSegundo, oferta_11ValorAumentoDiasCompras = @oferta_11ValorAumentoDiasCompras,oferta_12ValorAumentoDiasTodasCompras = @oferta_12ValorAumentoDiasTodasCompras,oferta_13ValorDescuentoCompra = @oferta_13ValorDescuentoCompra,oferta_14ValorImpresionGratis = @oferta_14ValorImpresionGratis, oferta_15ValorVideoGratis = @oferta_15ValorVideoGratis, oferta_16ValorEjerciciosGratis = oferta_16ValorEjerciciosGratis, oferta_17ValorExplicacionesGratis = oferta_17ValorExplicacionesGratis where id_Empresa = @id_Empresa

end try

begin catch

	return -6

end catch

GO
ALTER AUTHORIZATION ON [dbo].[actualizarValorOfertas] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[administradorBloqueado]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[administradorBloqueado] (@administrador nvarchar(10)) as

Begin Try	
	
	update Tabla_Administrador set bloqueo = 1 where administrador = @administrador
		    
End Try

Begin Catch
	
	Return -6

End Catch


GO
ALTER AUTHORIZATION ON [dbo].[administradorBloqueado] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrar_PedidoEjercicioVideo]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[borrar_PedidoEjercicioVideo] (@id_PedidoEjercicioVideo int) as

begin try

	delete from Tabla_PedidoEjercicioVideo Where id_PedidoEjercicioVideo = @id_PedidoEjercicioVideo
	
	return

end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[borrar_PedidoEjercicioVideo] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[borrarAdministrador] (@id_administrador int) as

begin try

	delete from Tabla_Categoria where id_Administrador = @id_administrador

	delete from Tabla_Administrador where id_Administrador = @id_administrador
	
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[borrarAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarAno]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[borrarAno] as

begin try

	truncate table Tabla_Ano

	return 1
	
end try

begin catch

	return -6
	
end catch 
GO
ALTER AUTHORIZATION ON [dbo].[borrarAno] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarColegio]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[borrarColegio] as

begin try

	truncate table Tabla_Colegio

	return 1
	
end try

begin catch

	return -6
	
end catch 
GO
ALTER AUTHORIZATION ON [dbo].[borrarColegio] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarComentarioAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[borrarComentarioAdministrador] (@id_mensajeAdministrador int) as

begin try

	delete from Tabla_MensajeAdministrador where id_mensajeAdministrador = @id_mensajeAdministrador 
	
	return

end try

begin catch

	return -6

end catch

GO
ALTER AUTHORIZATION ON [dbo].[borrarComentarioAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarConsultaAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[borrarConsultaAdministrador] (@id_ConsultaAdministrador int) as

begin try

	delete from Tabla_ConsultaAdministradores where id_ConsultaAdministrador = @id_ConsultaAdministrador
	
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[borrarConsultaAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarMateria]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[borrarMateria] as

begin try

	truncate table Tabla_Materia

	return 1
	
end try

begin catch

	return -6
	
end catch 
GO
ALTER AUTHORIZATION ON [dbo].[borrarMateria] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarMisEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[borrarMisEjercicios] (@id_CompraEjerciciosExplicaciones int) as

begin try

	delete from Tabla_MisEjercicios where id_CompraEjercicioExplicaicones = @id_CompraEjerciciosExplicaciones
	
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[borrarMisEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarMisExplicaciones]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[borrarMisExplicaciones] (@id_CompraVideos int) as

begin try

	delete from Tabla_MisExplicaciones where id_CompraVideos = @id_CompraVideos
	
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[borrarMisExplicaciones] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarMovimientos]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[borrarMovimientos] (@id_Movimiento int) as

begin try

	delete from Tabla_Movimientos where id_Movimiento = @id_Movimiento
	
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[borrarMovimientos] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarPedidoExplicacion]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[borrarPedidoExplicacion] (@id_PedidoExplicacion int) as

begin try

	delete from Tabla_PedidoExplicacion where id_PedidoExplicacion = @id_PedidoExplicacion
	
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[borrarPedidoExplicacion] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarPreguntaUsuario]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[borrarPreguntaUsuario] (@id_PreguntaUsuario int) as

begin try

	delete from Tabla_PreguntaClientes where id_PreguntaUsuario = @id_PreguntaUsuario
	
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[borrarPreguntaUsuario] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarProfesor]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[borrarProfesor] as

begin try

	truncate table Tabla_Profesor

	return 1
	
end try

begin catch

	return -6
	
end catch 
GO
ALTER AUTHORIZATION ON [dbo].[borrarProfesor] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarTarjetaPrepaga]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[borrarTarjetaPrepaga] (@id_Tarjeta int) as

begin try

	delete from Tabla_TarjetaPrepaga where id_Tarjeta = @id_Tarjeta
	
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[borrarTarjetaPrepaga] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarTema]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[borrarTema] as

begin try

	truncate table Tabla_Tema

	return 1
	
end try

begin catch

	return -6
	
end catch 
GO
ALTER AUTHORIZATION ON [dbo].[borrarTema] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[borrarUsuario]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[borrarUsuario] (@id_Usuario int) as

Begin try

	delete from Tabla_Movimientos where id_Usuario = @id_Usuario

	delete from Tabla_DatosUsuario where id_Usuario = @id_Usuario

	delete from Tabla_DatosExtraUsuario where id_Usuario = @id_Usuario

	delete from Tabla_UsuarioCredito where id_Usuario = @id_Usuario

	delete from Tabla_Usuario where id_Usuario = @id_Usuario	

	return

end try


Begin catch
	
	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[borrarUsuario] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[buscarAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[buscarAdministrador](@administrador nvarchar(10)) as

begin try

	select * from Tabla_Administrador where administrador = @administrador
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[buscarAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[buscarAdministradorPedidoEjercicioVideo]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[buscarAdministradorPedidoEjercicioVideo] (@id_Administrador int, @Administrador nvarchar(10) output) as

begin try

	select @Administrador = Administrador from Tabla_Administrador where id_Administrador = @id_Administrador

	return

end try

begin catch

	return -6

end catch



 
GO
ALTER AUTHORIZATION ON [dbo].[buscarAdministradorPedidoEjercicioVideo] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[buscarEmpresa]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[buscarEmpresa](@empresa nvarchar(10), @id_Empresa int output) as

begin try

	Select @id_Empresa = id_Empresa from Tabla_Empresa where empresa = @empresa

	if @id_Empresa is null

		begin

			set @id_Empresa = -1

			return

		end

	return @id_Empresa

end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[buscarEmpresa] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[buscarTarjetaPrepaga]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[buscarTarjetaPrepaga] (@CodigoTarjeta nvarchar(50), @empresa int) as

begin try

	select * from Tabla_TarjetaPrepaga where codigoTarjeta = @CodigoTarjeta and id_Empresa = @empresa
	
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[buscarTarjetaPrepaga] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[buscarUsuario]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[buscarUsuario] (@usuarioCorreo nvarchar(30),@usuarioTelefono nvarchar(20),@usuarioFacebook nvarchar(60),@empresa int) as

Begin try 

	if @usuarioCorreo is not null

		begin
					
			select * from Vista_UsuarioAdministrador where correo = @usuarioCorreo and id_Empresa = @empresa

			
		
		end

	if @usuarioTelefono is not null

		begin
			
			select * from Vista_UsuarioAdministrador where telefono = @usuarioTelefono and id_Empresa = @empresa

			return

		end

	if @usuarioFacebook is not null

		begin

			select * from Vista_UsuarioAdministrador where nameFacebook = @usuarioFacebook and id_Empresa = @empresa

			return

		end

	
			
end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[buscarUsuario] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[cargaCreditoAutomatico]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[cargaCreditoAutomatico] (@creditoUsuario decimal(18,2),@id_Usuario int, @empresa int) as

begin try
	
	Declare @creditoUsuarioReal decimal(18,2)

	select @creditoUsuarioReal = creditoUsuario from Tabla_UsuarioCredito where id_Usuario = @id_Usuario 

	Declare @id_Movimiento int

	select @id_Movimiento = MAX(id_Movimiento) from Tabla_Movimientos
	
	if @id_Movimiento is null

		begin

			set @id_Movimiento = 0

		end
					
	Declare @calculosAuxiliares1 decimal(18,2)

	Declare @calculosAuxiliares2 decimal(18,2)

	Declare @id_tipoMovimientoOferta1 int 

	Declare @id_tipoMovimientoOferta2 int 
		
	Declare @ofertaProximaCarga int
	
	select @ofertaProximaCarga = ofertaProximaCarga from Tabla_DatosExtraUsuario where id_Usuario = @id_Usuario

	set @calculosAuxiliares1 = 0

	set @calculosAuxiliares2 = 0
	
	-- movimiento carga de credito
	insert into Tabla_Movimientos (fechaMovimiento, id_Movimiento, id_TipoMovimiento, id_Usuario, debe, haber) values (GETDATE(), @id_Movimiento + 1, 22, @id_Usuario, @creditoUsuario, null)
		
	if @ofertaProximaCarga <> 1 -- si es igual a uno es poruqe no tenia bonificaciones pendientes

		begin

			set @calculosAuxiliares1 = (@ofertaProximaCarga * @creditoUsuario) - @creditoUsuario

			select @id_Movimiento = MAX(id_Movimiento) from Tabla_Movimientos

			-- movimiento oferta recarga
			insert into Tabla_Movimientos (fechaMovimiento, id_Movimiento, id_TipoMovimiento, id_Usuario, debe, haber) values (GETDATE(), @id_Movimiento + 1, 3, @id_Usuario, @calculosAuxiliares1, null)

		end

	-- analizamos si aumiento la carga
	
	Declare @oferta_4AumentoCarga bit
	
	Declare @oferta_5RegaloCarga bit

	Declare @oferta_4ValorAumentoCarga int

	Declare @oferta_5ValorRegaloCarga decimal (18,2)
	
	select @oferta_4AumentoCarga = oferta_4AumentoCarga, @oferta_5RegaloCarga = oferta_5RegaloCarga from Tabla_Ofertas where id_Empresa = @empresa
	
	select @oferta_4ValorAumentoCarga = oferta_4ValorAumentoCarga, @oferta_5ValorRegaloCarga = oferta_5ValorRegaloCarga from Tabla_ValorOfertas where id_Empresa = @empresa
		
	if @oferta_4AumentoCarga = 1-- bonificacion por carga 

		begin
			
			set @calculosAuxiliares2 = (@oferta_4ValorAumentoCarga * @creditoUsuario) - @creditoUsuario
			
			select @id_Movimiento = MAX(id_Movimiento) from Tabla_Movimientos
						
			-- movimiento oferta regalo por carga
			insert into Tabla_Movimientos (fechaMovimiento, id_Movimiento, id_TipoMovimiento, id_Usuario, debe, haber) values (GETDATE(), @id_Movimiento + 1, 23, @id_Usuario, @calculosAuxiliares2, null)
	

		end

	if @oferta_5RegaloCarga = 1-- bonificacion por carga 

		begin

			set @calculosAuxiliares2 = @oferta_5ValorRegaloCarga 

			select @id_Movimiento = MAX(id_Movimiento) from Tabla_Movimientos

			-- movimiento oferta regalo por carga
			insert into Tabla_Movimientos (fechaMovimiento, id_Movimiento, id_TipoMovimiento, id_Usuario, debe, haber) values (GETDATE(), @id_Movimiento + 1, 23, @id_Usuario, @calculosAuxiliares2, null)
							
		end
			
	-- actualizacion del credito del usuario

	set @creditoUsuario = @creditoUsuario + @calculosAuxiliares1 + @calculosAuxiliares2 + @creditoUsuarioReal

	update Tabla_UsuarioCredito set creditoUsuario = @creditoUsuario + @creditoUsuarioReal where id_Usuario = @id_Usuario
		
	-- analizamos si pidio el prestamo SOS	
	Declare @prestamoReal decimal(18,2)

	select @prestamoReal = prestamoReal from Tabla_UsuarioCredito where id_Usuario = @id_Usuario

	if @prestamoReal > 0 -- pidio dinero y no lo devolvio
	
		begin
		
			if @prestamoReal <= @creditoUsuario

				begin

					select @id_Movimiento = MAX(id_Movimiento) from Tabla_Movimientos

					-- movimiento devolucion total del prestamo 
					insert into Tabla_Movimientos (fechaMovimiento, id_Movimiento, id_TipoMovimiento, id_Usuario, debe, haber) values (GETDATE(), @id_Movimiento + 1, 5, @id_Usuario,null, @prestamoReal)
	
					-- credito total del usuario
					update Tabla_UsuarioCredito set creditoUsuario = @creditoUsuario - @prestamoReal, prestamoReal = 0, prestamoSOS = 0 where id_Usuario = @id_Usuario 
					
					return

				end

			if @prestamoReal > @creditoUsuario

				begin
						
					set @prestamoReal = @prestamoReal - @creditoUsuario

					select @id_Movimiento = MAX(id_Movimiento) from Tabla_Movimientos

					-- movimiento devolucion parcial del prestamo 
					insert into Tabla_Movimientos (fechaMovimiento, id_Movimiento, id_TipoMovimiento, id_Usuario, debe, haber) values (GETDATE(), @id_Movimiento + 1, 4, @id_Usuario,null, @prestamoReal)
	
					-- credito total del usuario = 0
					update Tabla_UsuarioCredito set creditoUsuario = 0 , prestamoReal = @prestamoReal where id_Usuario = @id_Usuario 
					
					return

				end

		end 
	
	update Tabla_UsuarioCredito set creditoUsuario = @creditoUsuario where id_Usuario = @id_Usuario

	return
	
End Try

Begin Catch

	return -6 -- no se conecto a la base de datos

End Catch

GO
ALTER AUTHORIZATION ON [dbo].[cargaCreditoAutomatico] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[cargaCreditoManual]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[cargaCreditoManual] (@creditoUsuario decimal(18,2),@id_Usuario int,@id_TipoMovimiento int, @empresa int) as

begin try
	
	Declare @creditoUsuarioReal decimal(18,2)

	select @creditoUsuarioReal = creditoUsuario from Tabla_UsuarioCredito where id_Usuario = @id_Usuario 

	Declare @id_Movimiento int

	select @id_Movimiento = MAX(id_Movimiento) from Tabla_Movimientos
	
	if @id_Movimiento is null

		begin

			set @id_Movimiento = 0

		end
		
	if @id_TipoMovimiento = 24

		begin

			-- movimiento carga de credito
			insert into Tabla_Movimientos (fechaMovimiento, id_Movimiento, id_TipoMovimiento, id_Usuario, debe, haber) values (GETDATE(), @id_Movimiento + 1, 24, @id_Usuario, null, @creditoUsuario)
		
			-- actualizar credito del usuario
			update Tabla_UsuarioCredito set creditoUsuario = @creditoUsuarioReal + @creditoUsuario

			return
			
		end
		
	Declare @calculosAuxiliares1 decimal(18,2)

	Declare @calculosAuxiliares2 decimal(18,2)

	Declare @id_tipoMovimientoOferta1 int 

	Declare @id_tipoMovimientoOferta2 int 
		
	Declare @ofertaProximaCarga int
	
	select @ofertaProximaCarga = ofertaProximaCarga from Tabla_DatosExtraUsuario where id_Usuario = @id_Usuario

	set @calculosAuxiliares1 = 0

	set @calculosAuxiliares2 = 0
	
	select @id_Movimiento = MAX(id_Movimiento) from Tabla_Movimientos

	-- movimiento carga de credito
	insert into Tabla_Movimientos (fechaMovimiento, id_Movimiento, id_TipoMovimiento, id_Usuario, debe, haber) values (GETDATE(), @id_Movimiento + 1, 22, @id_Usuario, @creditoUsuario, null)
		
	if @ofertaProximaCarga <> 1 -- si es igual a uno es poruqe no tenia bonificaciones pendientes

		begin

			set @calculosAuxiliares1 = (@ofertaProximaCarga * @creditoUsuario) - @creditoUsuario

			-- movimiento oferta recarga
			insert into Tabla_Movimientos (fechaMovimiento, id_Movimiento, id_TipoMovimiento, id_Usuario, debe, haber) values (GETDATE(), @id_Movimiento + 1, 3, @id_Usuario, @calculosAuxiliares1, null)

		end

	-- analizamos si aumiento la carga
	
	Declare @oferta_4AumentoCarga bit
	
	Declare @oferta_5RegaloCarga bit

	Declare @oferta_4ValorAumentoCarga int

	Declare @oferta_5ValorRegaloCarga decimal (18,2)
	
	select @oferta_4AumentoCarga = oferta_4AumentoCarga, @oferta_5RegaloCarga = oferta_5RegaloCarga from Tabla_Ofertas where id_Empresa = @empresa
	
	select @oferta_4ValorAumentoCarga = oferta_4ValorAumentoCarga, @oferta_5ValorRegaloCarga = oferta_5ValorRegaloCarga from Tabla_ValorOfertas where id_Empresa = @empresa
		
	if @oferta_4AumentoCarga = 1-- bonificacion por carga 

		begin
			
			set @calculosAuxiliares2 = (@oferta_4ValorAumentoCarga * @creditoUsuario) - @creditoUsuario

			select @id_Movimiento = MAX(id_Movimiento) from Tabla_Movimientos

			-- movimiento oferta regalo por carga
			insert into Tabla_Movimientos (fechaMovimiento, id_Movimiento, id_TipoMovimiento, id_Usuario, debe, haber) values (GETDATE(), @id_Movimiento + 1, 23, @id_Usuario, @calculosAuxiliares2, null)
							
		end

	if @oferta_5RegaloCarga = 1-- bonificacion por carga 

		begin

			set @calculosAuxiliares2 = @oferta_5ValorRegaloCarga 

			select @id_Movimiento = MAX(id_Movimiento) from Tabla_Movimientos

			-- movimiento oferta regalo por carga
			insert into Tabla_Movimientos (fechaMovimiento, id_Movimiento, id_TipoMovimiento, id_Usuario, debe, haber) values (GETDATE(), @id_Movimiento + 1, 23, @id_Usuario, @calculosAuxiliares2, null)
							
		end
			
	-- actualizacion del credito del usuario

	set @creditoUsuario = @creditoUsuario + @calculosAuxiliares1 + @calculosAuxiliares2 + @creditoUsuarioReal

	update Tabla_UsuarioCredito set creditoUsuario = @creditoUsuario + @creditoUsuarioReal where id_Usuario = @id_Usuario
		
	-- analizamos si pidio el prestamo SOS	
	Declare @prestamoReal decimal(18,2)

	select @prestamoReal = prestamoReal from Tabla_UsuarioCredito where id_Usuario = @id_Usuario

	if @prestamoReal > 0 -- pidio dinero y no lo devolvio
	
		begin
		
			if @prestamoReal <= @creditoUsuario

				begin

					select @id_Movimiento = MAX(id_Movimiento) from Tabla_Movimientos

					-- movimiento devolucion total del prestamo 
					insert into Tabla_Movimientos (fechaMovimiento, id_Movimiento, id_TipoMovimiento, id_Usuario, debe, haber) values (GETDATE(), @id_Movimiento + 1, 5, @id_Usuario,null, @prestamoReal)
	
					-- credito total del usuario
					update Tabla_UsuarioCredito set creditoUsuario = @creditoUsuario - @prestamoReal, prestamoReal = 0, prestamoSOS = 0 where id_Usuario = @id_Usuario 
					
					return

				end

			if @prestamoReal > @creditoUsuario

				begin
						
					set @prestamoReal = @prestamoReal - @creditoUsuario

					select @id_Movimiento = MAX(id_Movimiento) from Tabla_Movimientos

					-- movimiento devolucion parcial del prestamo 
					insert into Tabla_Movimientos (fechaMovimiento, id_Movimiento, id_TipoMovimiento, id_Usuario, debe, haber) values (GETDATE(), @id_Movimiento + 1, 4, @id_Usuario,null, @prestamoReal)
	
					-- credito total del usuario = 0
					update Tabla_UsuarioCredito set creditoUsuario = 0 , prestamoReal = @prestamoReal where id_Usuario = @id_Usuario 
					
					return

				end

		end 
	
	update Tabla_UsuarioCredito set creditoUsuario = @creditoUsuario where id_Usuario = @id_Usuario

	return
	
End Try

Begin Catch

	return -6 -- no se conecto a la base de datos

End Catch

GO
ALTER AUTHORIZATION ON [dbo].[cargaCreditoManual] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[ingresoAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[ingresoAdministrador] (@Administrador nvarchar(10), @contrasenaAdministrador nvarchar(10),@ipAddress nvarchar(20), @id_Administrador int output)
as

Begin try

	select @id_Administrador = id_Administrador from Tabla_Administrador where administrador = @administrador and contrasenaAdministrador = @contrasenaAdministrador and bloqueo = 0
	
	if @id_Administrador is not null

	Begin

		Declare @id_ConsultaAdministrador int
				
		select @id_ConsultaAdministrador = MAX(id_ConsultaAdministrador) from Tabla_ConsultaAdministradores 

		if @id_ConsultaAdministrador is null

			begin

				set @id_ConsultaAdministrador = 0;

			end
			
		insert into Tabla_ConsultaAdministradores (id_ConsultaAdministrador,id_Administrador,ingresoAdministrador,egresoAdministrador,ipAdministrador) values (@id_ConsultaAdministrador + 1,@id_Administrador,getdate(), null, @ipAddress)

		return @id_Administrador

	end
	
	set @id_Administrador = 0

	return @id_Administrador 
	 
	return 

end try


Begin catch
	
	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[ingresoAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[ingresoAdministradorEmpresa]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[ingresoAdministradorEmpresa] (@Administrador nvarchar(10), @empresa int output)
as

Begin try

	select @empresa = id_Empresa from Tabla_Administrador where administrador = @administrador 
	
	return @empresa

end try


Begin catch
	
	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[ingresoAdministradorEmpresa] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[ingresoMisEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[ingresoMisEjercicios] (@id_Usuario int, @id_Ejercicio int,@ejercicio bit, @explicacion bit, @id_Empresa int, @resultado int output) as

Begin try

	Declare @vencimiento int

	Select @vencimiento = duracionEjercicios from Tabla_DuracionProductos where id_Empresa = @id_Empresa

	Declare @id_CompraEjercicioExplicaicones int

	Declare @validacion int

	select @id_CompraEjercicioExplicaicones = MAX(id_CompraEjercicioExplicaicones) from Tabla_MisEjercicios 

	select @validacion = id_CompraEjercicioExplicaicones from Tabla_MisEjercicios where id_Ejercicio = @id_Ejercicio and id_Usuario = @id_Usuario 

	Declare @tipoEjercicio int

	select @tipoEjercicio = id_TipoEjercicio from Tabla_Ejercicios where @id_Ejercicio = id_Ejercicio
	
	if @tipoEjercicio = 3 
		
		begin

			set @resultado = -1

			return @resultado
	
		end
	
	if @id_CompraEjercicioExplicaicones is null
	
		begin

			set @id_CompraEjercicioExplicaicones = 0;

		end

	if @ejercicio is not null and @explicacion is not null

		begin

			insert into Tabla_MisEjercicios (id_CompraEjercicioExplicaicones, id_Ejercicio, ejercicio, explicacion, venvimiento, fechaVencimiento, id_Usuario) values (@id_CompraEjercicioExplicaicones + 1, @id_Ejercicio, 1,1, @vencimiento, dateadd(day,@vencimiento, getdate()), @id_Usuario)
										
			set @resultado = 1

			return @resultado

		end

	if @ejercicio is not null

		begin
		
			if @validacion is null  -- seguro qeu no tengo ejercicio ni explicacion comprada

				begin

					insert into Tabla_MisEjercicios (id_CompraEjercicioExplicaicones, id_Ejercicio, ejercicio, explicacion, venvimiento, fechaVencimiento, id_Usuario) values (@id_CompraEjercicioExplicaicones + 1, @id_Ejercicio, 1,0, @vencimiento, dateadd(day,@vencimiento, getdate()), @id_Usuario)
										
					set @resultado = 1

					return @resultado

				end

			if exists (select id_CompraEjercicioExplicaicones from Tabla_MisEjercicios where id_Ejercicio = @id_Ejercicio and ejercicio = 1 and id_Usuario = @id_Usuario)

				begin

					set @resultado = -1

					return @resultado

				end
					
			update Tabla_MisEjercicios set ejercicio = 1, venvimiento = @vencimiento, fechaVencimiento = DATEADD(day, @vencimiento, GETDATE()) where id_CompraEjercicioExplicaicones = @id_CompraEjercicioExplicaicones

			set @resultado = 1

			return @resultado

		end

	if @explicacion is not null

		begin
		
			if @validacion is null  -- seguro qeu no tengo ejercicio ni explicacion comprada

				begin

					insert into Tabla_MisEjercicios (id_CompraEjercicioExplicaicones, id_Ejercicio, ejercicio, explicacion, venvimiento, fechaVencimiento, id_Usuario) values (@id_CompraEjercicioExplicaicones + 1, @id_Ejercicio, 0,1, @vencimiento, dateadd(day,@vencimiento, getdate()), @id_Usuario)
										
					set @resultado = 1

					return @resultado

				end

			if exists (select id_CompraEjercicioExplicaicones from Tabla_MisEjercicios where id_Ejercicio = @id_Ejercicio and explicacion = 1 and id_Usuario = @id_Usuario)

				begin

					set @resultado = -1

					return @resultado

				end
					
			update Tabla_MisEjercicios set explicacion = 1, venvimiento = @vencimiento, fechaVencimiento = DATEADD(day, @vencimiento, GETDATE()) where id_CompraEjercicioExplicaicones = @id_CompraEjercicioExplicaicones

			set @resultado = 1

			return @resultado

		end

end try


Begin catch
	
	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[ingresoMisEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[ingresoMisExplicaciones]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[ingresoMisExplicaciones] (@id_Usuario int, @id_Ejercicio int,@video bit, @id_Empresa int, @resultado int output) as

Begin try

	Declare @vencimiento int

	Select @vencimiento = duracionEjercicios from Tabla_DuracionProductos where id_Empresa = @id_Empresa

	Declare @id_CompraVideos int

	select @id_CompraVideos = id_CompraVideos from Tabla_MisExplicaciones where id_Ejercicio = @id_Ejercicio and id_Usuario = @id_Usuario 

	Declare @id_TipoEjercicio int
	
	select @id_TipoEjercicio = id_TipoEjercicio from Tabla_Ejercicios where id_Ejercicio = @id_Ejercicio

	if @id_TipoEjercicio = 3

		begin

			set @resultado = -1

			return @resultado

		end	
	
	if @id_CompraVideos is null  -- seguro qeu no tengo video

		begin

			select @id_CompraVideos = MAX(id_CompraVideos) from Tabla_MisExplicaciones

			if @id_CompraVideos is null

				begin

					set @id_CompraVideos = 0;

				end
		
			insert into Tabla_MisExplicaciones (id_CompraVideos, id_Ejercicio, video, vencimiento, fechaVencimiento, id_Usuario) values (@id_CompraVideos + 1, @id_Ejercicio, 1, @vencimiento, dateadd(day,@vencimiento, getdate()), @id_Usuario)
										
			set @resultado = 1

			return @resultado
							
		end

	set @resultado = -1

	return @resultado
					
end try


Begin catch
	
	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[ingresoMisExplicaciones] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[insertarAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[insertarAdministrador](@administrador nvarchar(10), @id_Empresa int,@dios int, @resultado int output) as

begin try

	if exists (select id_Administrador from Tabla_Administrador where administrador = @administrador)

		Begin
			
			set @resultado = -1

			return @resultado
	
		end

	Declare @id_Administrador int

	select @id_Administrador = Max(id_Administrador) from Tabla_Administrador

	if @id_Administrador is null

		begin

			set @id_Administrador = 0

		end

	if @dios = 1

		begin

			insert into Tabla_Administrador (id_Administrador, administrador, contrasenaAdministrador, bloqueo, id_Empresa) values (@id_Administrador + 1, @administrador, 'dios123', 0, @id_Empresa)
	
			insert into Tabla_Categoria (id_Administrador,a1,a2,a3,u1,u2,p1,p2,p3,p4,ce1,ce2,ie1,ie2,c1,c2,c3,c4,c5,ep1,ep2) values (@id_Administrador + 1, 10,10,10, 10,10, 10,10,10,10, 10,10, 10,10, 10,10,10,10,10 ,10,10)
			
			set @resultado = 1

			return @resultado

		end

	insert into Tabla_Administrador (id_Administrador, administrador, contrasenaAdministrador, bloqueo, id_Empresa) values (@id_Administrador + 1, @administrador, 'contra123', 0, @id_Empresa)
	
	insert into Tabla_Categoria (id_Administrador,a1,a2,a3,u1,u2,p1,p2,p3,p4,ce1,ce2,ie1,ie2,c1,c2,c3,c4,c5,ep1,ep2) values (@id_Administrador + 1, 8,6,5, 8,6, 0,5,5,5, 8,8, 0,0, 8,6,6,0,6 ,6,7)

	set @resultado = 1

	return @resultado

end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[insertarAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[insertarAdministradorComun]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[insertarAdministradorComun] (@administrador nvarchar(10), @id_Empresa int, @resultado int output) as

begin try

	if exists (select id_Administrador from Tabla_Administrador where administrador = @administrador)

		Begin
			
			set @resultado = -1

			return @resultado
	
		end

	Declare @id_Administrador int

	select @id_Administrador = Max(id_Administrador) from Tabla_Administrador

	if @id_Administrador is null

		begin

			set @id_Administrador = 0

		end

	insert into Tabla_Administrador (id_Administrador, administrador, contrasenaAdministrador, bloqueo, id_Empresa) values (@id_Administrador + 1, @administrador, 'contra123', 0, @id_Empresa)
	
	insert into Tabla_Categoria (id_Administrador,a1,a2,a3,u1,u2,p1,p2,p3,p4,ce1,ce2,ie1,ie2,c1,c2,c3,c4,c5,ep1,ep2) values (@id_Administrador + 1, 0,0,0, 0,0, 0,0,0,0, 0,0, 0,0, 0,0,0,0,0 ,0,0)

	set @resultado = 1

	return @resultado

end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[insertarAdministradorComun] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[insertarComentarioAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[insertarComentarioAdministrador](@id_Administrador int, @comentario nvarchar(MAX)) as

begin try

	Declare @id_MensajeAdministrador int

	select @id_MensajeAdministrador = MAX(id_MensajeAdministrador) from Tabla_MensajeAdministrador

	if @id_MensajeAdministrador is null

		begin

			set @id_MensajeAdministrador = 0
			
		end

	insert into Tabla_MensajeAdministrador (id_MensajeAdministrador,id_Administrador,mensajeAdministrador, fechaComentario) values (@id_MensajeAdministrador + 1, @id_Administrador, @comentario, getdate())
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[insertarComentarioAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[insertarEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[insertarEjercicios] (@titulo nvarchar(50),@id_TipoEjercicio int,@id_TipoInstitucion int, @explicacionRealizada bit,@enunciadoMATH nvarchar(max),@enunciadoLimpio nvarchar(max), @ubicacionRespuestaImprimible nvarchar(40),@ubicacionRespuestaVisible nvarchar(100),@ubicacionVideos nvarchar(40),@etiquetaAno nvarchar(60),@etiquetaColegio nvarchar(60),@etiquetaMateria nvarchar(60),@etiquetaProfesor nvarchar(60),@etiquetaTema nvarchar(60)) as

begin try
	
	declare @id_Ejercicio int

	select @id_Ejercicio = max(id_Ejercicio)  from Tabla_Ejercicios

	if (@id_Ejercicio is null)

		begin
		
			set @ID_Ejercicio = 0
		
		end

	insert into Tabla_Ejercicios(id_Ejercicio,Titulo,id_TipoEjercicio,explicacionRealizada) Values (@id_Ejercicio + 1, @titulo, @id_TipoEjercicio,@explicacionRealizada)
	
	insert into Tabla_EnunciadoEjercicios (id_Ejercicio,enunciadoMATH,enunciadoLimpio) values (@id_Ejercicio + 1,@enunciadoMATH,@enunciadoLimpio)

	insert into Tabla_UbicacionEjercicios (id_Ejercicio,ubicacionImprimible,ubicacionVisible,ubicacionVideo) values (@id_Ejercicio + 1,@ubicacionRespuestaImprimible,@ubicacionRespuestaVisible,@ubicacionVideos)

	insert into Tabla_BuquedasEjercicios(id_Ejercicio,etiquetaAno,etiquetaColegio,etiquetaMateria,etiquetaProfesor,etiquetaTema,id_TipoInstitucion) Values (@id_Ejercicio + 1,@etiquetaAno,@etiquetaColegio,@etiquetaMateria,@etiquetaProfesor,@etiquetaTema,@id_TipoInstitucion)

	return 1

end try

begin Catch

	return -6

end Catch
GO
ALTER AUTHORIZATION ON [dbo].[insertarEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[insertarEmpresa]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[insertarEmpresa] (@empresa nvarchar(10), @resultado int output) as

begin try

	Declare @id_Empresa int

	select @id_Empresa = Max(id_Empresa) from Tabla_Empresa

	if @id_Empresa is null

		begin

			set @id_Empresa = 0

		end

	if exists (select @id_Empresa from Tabla_Empresa where empresa = @empresa)

		begin

			set @resultado = -1

			return @resultado

		end

	insert into Tabla_Empresa(id_Empresa,empresa) values (@id_Empresa + 1, @empresa)

	insert into Tabla_DuracionProductos (id_Empresa, precioEjercicio, precioExplicacion, precioImpresion, precioVideo, duracionEjercicios, duracionVideos, ejerciciosCompradosHabitue, recargaHabitue) values (@id_Empresa + 1,0,0,0,0,0,0,0,0)

	insert into Tabla_ValorOfertas (id_Empresa,oferta_1ValorPrestamoSOS,oferta_2ValorRegistro,oferta_3ValorProximaCarga,oferta_4ValorAumentoCarga,oferta_5ValorRegaloCarga,oferta_6ValorDosXUno,oferta_7ValorDosXUnoigualProducto,oferta_8ValorGratis,oferta_9ValorDescuentoSegundo,oferta_10ValorBonificacionHabitue,oferta_11ValorAumentoDiasCompras,oferta_12ValorAumentoDiasTodasCompras,oferta_13ValorDescuentoCompra,oferta_14ValorImpresionGratis,oferta_15ValorVideoGratis,oferta_16ValorEjerciciosGratis,oferta_17ValorExplicacionesGratis,oferta_18Valor,oferta_19Valor,oferta_20Valor) Values (@id_Empresa + 1, 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)
	
	insert into Tabla_Ofertas (id_Empresa,oferta_1PrestamoSOS,oferta_2Registro,oferta_3ProximaCarga,oferta_4AumentoCarga,oferta_5RegaloCarga,oferta_6DosXUno,oferta_7DosXUnoIgualProducto,oferta_8Gratis,oferta_9DescuentoSegundo,oferta_10BonificaciónHabitue,oferta_11AumentoDiasCompras,oferta_12AumentoDiasTodasCompras,oferta_13DescuentoCompra,oferta_14ImpresionGratis,oferta_15VideosGratis,oferta_16EjerciciosGratis,oferta_17ExplicacionesGratis,oferta_18,oferta_19,oferta_20) Values (@id_Empresa + 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)

	set @resultado = 1

	return @resultado

end try

begin catch

	return -6

end catch

GO
ALTER AUTHORIZATION ON [dbo].[insertarEmpresa] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[insertarTarjetaPrepaga]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[insertarTarjetaPrepaga] (@codigoTarjeta nvarchar(50), @vencimientoTarjeta datetime, @valorTarjeta decimal(18,2),@empresa int) as

begin try

	Declare @id_Tarjeta int

	select @id_Tarjeta = Max(id_Tarjeta) from Tabla_TarjetaPrepaga

	if @id_Tarjeta is null

		begin

			set @id_Tarjeta = 0

		end


	insert into Tabla_TarjetaPrepaga (id_Tarjeta, codigoTarjeta, valorTarjeta, vencimientoTarjeta, bloqueoTarjeta, id_Empresa) values (@id_Tarjeta + 1, @codigoTarjeta, @valorTarjeta, @vencimientoTarjeta, 1, @empresa)

end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[insertarTarjetaPrepaga] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[insertarUsuario]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[insertarUsuario] (@usuarioCorreo nvarchar(30), @usuarioTelefono nvarchar(20), @password nvarchar(10), @empresa int, @resultado int output) as

Begin try

	if @usuarioCorreo is not null -- en caso de tener algo en su interior tengo que cotejar que el correo no se encuentre registrado por la misma empresa

		begin

			if exists (select id_Usuario from Tabla_Usuario where correo = @usuarioCorreo and id_Empresa = @empresa)

				Begin

					set @resultado = -1 --existe correo registrado para esa empresa

					return @resultado 

				end

		end

	Declare @id_Usuario int

	select @id_Usuario = MAX(id_Usuario) from Tabla_Usuario 

	if @id_Usuario is null

		begin

			set @id_Usuario = 0

		end
		
	insert into Tabla_Usuario (id_Usuario,id_Empresa,id_Facebook,nameFacebook,correo,password) values (@id_Usuario + 1, @empresa, null, null, @usuarioCorreo, @password)

	insert into Tabla_UsuarioCredito (id_Usuario, creditoUsuario, prestamoReal, prestamoSOS) values (@id_Usuario + 1, 0, 0, 0)

	insert into Tabla_DatosUsuario (id_Usuario, modeloTelefono, skype, telefono, pais) values (@id_Usuario + 1, null, null, null, null)
		
	insert into Tabla_DatosExtraUsuario (id_Usuario, ipAddress, bloqueoUsuario, codigoBloqueo, ofertaProximaCarga) values (@id_Usuario + 1, '::Administrador', 0, 0, 1)
 
	set @resultado = 1 

	return @resultado 

end try


Begin catch
	
	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[insertarUsuario] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[mostrarAdministrador](@id_Empresa int) as

begin try

	if @id_Empresa = 0

		begin

			select * from Tabla_Administrador

			return

		end

	select * from Tabla_Administrador where id_Empresa = @id_Empresa
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarCategoriaAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[mostrarCategoriaAdministrador] (@id_Administrador int) as

begin try

	select * from Tabla_Categoria where id_Administrador = @id_Administrador

end try

begin catch

	return -6

end catch

GO
ALTER AUTHORIZATION ON [dbo].[mostrarCategoriaAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarComentarioAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[mostrarComentarioAdministrador](@empresa int) as

begin try

	if @empresa = 0

		begin

			select * from Vista_MensajeAdministrador

		end

	select * from Vista_MensajeAdministrador where id_Empresa = @empresa  
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarComentarioAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarEmpresa]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[mostrarEmpresa] as

begin try

	select * from Tabla_Empresa 

end try

begin catch

	return -6

end catch

GO
ALTER AUTHORIZATION ON [dbo].[mostrarEmpresa] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarExplicacionPedida]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[mostrarExplicacionPedida] (@empresa int) as

begin try

	if @empresa = 0

		begin

			select * from Tabla_PedidoExplicacion

		end

	select * from Tabla_PedidoExplicacion where id_Empresa = @empresa
	
End try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarExplicacionPedida] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarIngresoAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[mostrarIngresoAdministrador] (@id_Empresa int) as

begin try

	if @id_Empresa = 0

		begin

			select * from Vista_ConsultasAdministradores order by id_ConsultaAdministrador desc
			
		end

	select * from Vista_ConsultasAdministradores where id_Empresa = @id_Empresa order by id_ConsultaAdministrador desc
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarIngresoAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarMisEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[mostrarMisEjercicios](@id_Empresa int) as

begin try

	if @id_Empresa = 0

		begin

			select * from Vista_MisEjercicios

			return

		end

	select * from Vista_MisEjercicios where id_Empresa = @id_Empresa
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarMisEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarMisExplicaciones]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[mostrarMisExplicaciones](@id_Empresa int) as

begin try

	if @id_Empresa = 0

		begin

			select * from Vista_MisExplicaciones

			return

		end

	select * from Vista_MisExplicaciones where id_Empresa = @id_Empresa
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarMisExplicaciones] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarMovimientos]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[mostrarMovimientos] (@empresa int) as

Begin try 

	if @empresa = 0

		begin

			select * from Vista_Movimientos

		end

	select * from Vista_Movimientos where id_Empresa = @empresa

	return		
			
end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarMovimientos] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarOfertas]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[mostrarOfertas](@empresa int) as

begin try

	if @empresa = 0

		begin

			select * from Tabla_Ofertas

		end

	select * from Tabla_Ofertas where id_Empresa = @empresa  
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarOfertas] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarPedidoEjercicioVideo]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[mostrarPedidoEjercicioVideo] (@empresa int) as

begin try

	if @empresa = 0
	
		begin 

			select * from Tabla_PedidoEjercicioVideo

			return

		end

	select * from Tabla_PedidoEjercicioVideo where id_Empresa = @empresa
	
	return 1

end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarPedidoEjercicioVideo] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarPrecios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[mostrarPrecios](@empresa int) as

begin try

	if @empresa = 0

		begin

			select * from Tabla_DuracionProductos
			
			return

		end

	select * from Tabla_DuracionProductos where id_Empresa = @empresa  

	return
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarPrecios] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarPreguntaClientes]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[mostrarPreguntaClientes](@empresa int) as

begin try

	if @empresa = 0

		begin

			select * from Tabla_PreguntaClientes

		end

	select * from Tabla_PreguntaClientes where id_Empresa = @empresa  
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarPreguntaClientes] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarTarjetaPrepaga]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[mostrarTarjetaPrepaga] (@id_Empresa int) as

begin try

	if @id_Empresa = 0

		begin

			select * from Vista_TarjetaPrepaga

			return

		end

	select * from Vista_TarjetaPrepaga where id_Empresa = @id_Empresa
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarTarjetaPrepaga] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarUsuario]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[mostrarUsuario] (@empresa int) as

Begin try 

	if @empresa = 0

		begin

			select * from Vista_UsuarioAdministrador

		end

	select * from Vista_UsuarioAdministrador where id_Empresa = @empresa

	return		
			
end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarUsuario] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarUsuarioCredito]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[mostrarUsuarioCredito] (@empresa int) as

Begin try 

	if @empresa = 0

		begin

			select * from Vista_UsuarioCredito

		end

	select * from Vista_UsuarioCredito where id_Empresa = @empresa

	return		
			
end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarUsuarioCredito] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[mostrarValorOfertas]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[mostrarValorOfertas](@empresa int) as

begin try

	if @empresa = 0

		begin

			select * from Tabla_ValorOfertas

		end

	select * from Tabla_ValorOfertas where id_Empresa = @empresa  
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[mostrarValorOfertas] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[paginadoAdministrador](@id_Empresa int,@pagina int output) as

begin try

	if @id_Empresa = 0

		begin

			select @pagina = count(id_Administrador) from Tabla_Administrador

			return

		end

	select  @pagina = count(id_Administrador) from Tabla_Administrador where id_Empresa = @id_Empresa
		
end try


begin catch

	return -6

end catch



GO
ALTER AUTHORIZATION ON [dbo].[paginadoAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoComentarioAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[paginadoComentarioAdministrador](@empresa int, @paginado int output) as

begin try

	if @empresa = 0

		begin

			select @paginado = count(id_MensajeAdministrador) from Vista_MensajeAdministrador

			return

		end

	select @paginado = count(id_MensajeAdministrador) from Vista_MensajeAdministrador where id_Empresa = @empresa  
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[paginadoComentarioAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoEmpresa]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[paginadoEmpresa] (@paginas int output) as

begin try

	select @paginas = count(id_Empresa) from Tabla_Empresa 

end try

begin catch

	return -6

end catch

GO
ALTER AUTHORIZATION ON [dbo].[paginadoEmpresa] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoExplicacionPedida]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[paginadoExplicacionPedida] (@empresa int, @pagina int output) as

begin try

	if @empresa = 0

		begin

			select @pagina = count(id_PedidoExplicacion) from Tabla_PedidoExplicacion

		end

	select  @pagina = count(id_PedidoExplicacion) from Tabla_PedidoExplicacion where id_Empresa = @empresa
	
End try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[paginadoExplicacionPedida] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoIngresoAdministrador]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[paginadoIngresoAdministrador] (@id_Empresa int, @pagina int output) as

begin try

	if @id_Empresa = 0

		begin

			select @pagina = Count(id_ConsultaAdministrador) from Vista_ConsultasAdministradores

			return

		end

	select @pagina = Count(id_ConsultaAdministrador) from Vista_ConsultasAdministradores where id_Empresa = @id_Empresa
		
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[paginadoIngresoAdministrador] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoMisEjercicios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[paginadoMisEjercicios](@id_Empresa int,@pagina int output) as

begin try

	if @id_Empresa = 0

		begin

			select @pagina = count(id_CompraEjercicioExplicaicones) from Vista_MisEjercicios

			return

		end

	select  @pagina = count(id_CompraEjercicioExplicaicones) from Vista_MisEjercicios where id_Empresa = @id_Empresa
		
end try


begin catch

	return -6

end catch



GO
ALTER AUTHORIZATION ON [dbo].[paginadoMisEjercicios] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoMisExplicaciones]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[paginadoMisExplicaciones](@id_Empresa int,@pagina int output) as

begin try

	if @id_Empresa = 0

		begin

			select @pagina = count(id_CompraVideos) from Vista_MisExplicaciones

			return

		end

	select  @pagina = count(id_CompraVideos) from Vista_MisExplicaciones where id_Empresa = @id_Empresa
		
end try


begin catch

	return -6

end catch



GO
ALTER AUTHORIZATION ON [dbo].[paginadoMisExplicaciones] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoMovimientos]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[paginadoMovimientos] (@empresa int, @pagina int output) as

Begin try 

	if @empresa = 0

		begin

			select @pagina = count(id_Movimiento) from Vista_Movimientos

			return

		end

	select @pagina = count(id_Movimiento) from Vista_Movimientos where id_Empresa = @empresa

	return		
			
end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[paginadoMovimientos] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoOfertas]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[paginadoOfertas](@pagina int output) as

begin try

	select @pagina = count(id_Empresa) from Tabla_Ofertas
			
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[paginadoOfertas] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoPedidoEjercicioVideo]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[paginadoPedidoEjercicioVideo] (@empresa int, @paginas int output) as

begin try

	if @empresa = 0
	
		begin 

			select @paginas = count(id_PedidoEjercicioVideo) from Tabla_PedidoEjercicioVideo

			return

		end

	select @paginas = count(id_PedidoEjercicioVideo) from Tabla_PedidoEjercicioVideo where id_Empresa = @empresa
	
	return 1

end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[paginadoPedidoEjercicioVideo] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoPrecios]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[paginadoPrecios](@pagina int output) as

begin try

	select @pagina = count(id_Empresa) from Tabla_DuracionProductos
			
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[paginadoPrecios] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoPreguntaClientes]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[paginadoPreguntaClientes] (@id_Empresa int,@pagina int output) as

begin try

	if @id_Empresa = 0

		begin

			select @pagina = count(id_PreguntaUsuario) from Tabla_PreguntaClientes

			return

		end

	select  @pagina = count(id_PreguntaUsuario) from Tabla_PreguntaClientes where id_Empresa = @id_Empresa
		
end try


begin catch

	return -6

end catch



GO
ALTER AUTHORIZATION ON [dbo].[paginadoPreguntaClientes] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoTarjetaPrepaga]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[paginadoTarjetaPrepaga] (@id_Empresa int,@pagina int output) as

begin try

	if @id_Empresa = 0

		begin

			select @pagina = count(id_Tarjeta) from Vista_TarjetaPrepaga

			return

		end

	select  @pagina = count(id_Tarjeta) from Vista_TarjetaPrepaga where id_Empresa = @id_Empresa
		
end try


begin catch

	return -6

end catch



GO
ALTER AUTHORIZATION ON [dbo].[paginadoTarjetaPrepaga] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoUsuario]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[paginadoUsuario] (@empresa int, @pagina int output) as

Begin try 

	if @empresa = 0

		begin

			select @pagina = count(id_Usuario) from Vista_UsuarioAdministrador

			return

		end

	select @pagina = count(id_Usuario) from Vista_UsuarioAdministrador where id_Empresa = @empresa

	return		
			
end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[paginadoUsuario] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoUsuarioCredito]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[paginadoUsuarioCredito] (@empresa int, @pagina int output) as

Begin try 

	if @empresa = 0

		begin

			select @pagina = count(id_Usuario) from Vista_UsuarioCredito 

			return

		end

	select @pagina = count(id_Usuario) from Vista_UsuarioCredito where id_Empresa = @empresa

	return		
			
end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[paginadoUsuarioCredito] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[paginadoValorOfertas]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE proc [dbo].[paginadoValorOfertas](@pagina int output) as

begin try

	select @pagina = count(id_Empresa) from Tabla_ValorOfertas
			
end try


begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[paginadoValorOfertas] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[recargarAnoXML]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[recargarAnoXML] (@id_Ano int, @ano nvarchar(20), @etiquetaAno int) as

begin try

	insert into Tabla_Ano (id_Ano, ano, etiquetaAno) values (@id_Ano, @ano, @etiquetaAno)
	
	return 1
	
end try

begin catch

	return -6
	
end catch 
GO
ALTER AUTHORIZATION ON [dbo].[recargarAnoXML] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[recargarColegioXML]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[recargarColegioXML] (@id_Colegio int, @Colegio nvarchar(20), @etiquetaColegio int) as

begin try

	insert into Tabla_Colegio (id_Colegio, Colegio, etiquetaColegio) values (@id_Colegio, @Colegio, @etiquetaColegio)
	
	return 1
	
end try

begin catch

	return -6
	
end catch 
GO
ALTER AUTHORIZATION ON [dbo].[recargarColegioXML] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[recargarMateriaXML]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create PROC [dbo].[recargarMateriaXML] (@id_Materia int, @Materia nvarchar(20), @etiquetaMateria int) as

begin try

	insert into Tabla_Materia (id_Materia, Materia, etiquetaMateria) values (@id_Materia, @Materia, @etiquetaMateria)
	
	return 1
	
end try

begin catch

	return -6
	
end catch 
GO
ALTER AUTHORIZATION ON [dbo].[recargarMateriaXML] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[recargarProfesorXML]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create PROC [dbo].[recargarProfesorXML] (@id_Profesor int, @Profesor nvarchar(20), @etiquetaProfesor int) as

begin try

	insert into Tabla_Profesor (id_Profesor, profesor, etiquetaProfesor) values (@id_Profesor, @profesor, @etiquetaProfesor)
	
	return 1
	
end try

begin catch

	return -6
	
end catch 
GO
ALTER AUTHORIZATION ON [dbo].[recargarProfesorXML] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[recargarTemaXML]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE PROC [dbo].[recargarTemaXML] (@id_Tema int, @Tema nvarchar(20), @etiquetaTema int) as

begin try

	insert into Tabla_Tema (id_Tema, Tema, etiquetaTema) values (@id_Tema, @Tema, @etiquetaTema)
	
	return 1
	
end try

begin catch

	return -6
	
end catch 
GO
ALTER AUTHORIZATION ON [dbo].[recargarTemaXML] TO  SCHEMA OWNER 
GO
/****** Object:  StoredProcedure [dbo].[verificarEmpresa]    Script Date: 21/06/2016 2:15:10 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
create proc [dbo].[verificarEmpresa](@empresa nvarchar(10), @resultado int output) as
Begin try

	Select @resultado = id_Empresa from Tabla_Empresa where empresa = @empresa

	if @resultado is null
		
		begin

			return @resultado

		end

	set @resultado = -1

	return @resultado

end try

begin catch

	return -6

end catch
GO
ALTER AUTHORIZATION ON [dbo].[verificarEmpresa] TO  SCHEMA OWNER 
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[56] 4[15] 2[11] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Usuario"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 180
               Right = 247
            End
            DisplayFlags = 280
            TopColumn = 1
         End
         Begin Table = "Tabla_Empresa"
            Begin Extent = 
               Top = 184
               Left = 243
               Bottom = 286
               Right = 452
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_DatosExtraUsuario"
            Begin Extent = 
               Top = 0
               Left = 529
               Bottom = 153
               Right = 738
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_DatosUsuario"
            Begin Extent = 
               Top = 156
               Left = 533
               Bottom = 286
               Right = 742
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_ActivacionUsuarioWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_ActivacionUsuarioWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_BusquedaEjercicios"
            Begin Extent = 
               Top = 9
               Left = 337
               Bottom = 192
               Right = 546
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_Ejercicios"
            Begin Extent = 
               Top = 6
               Left = 46
               Bottom = 102
               Right = 255
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_BusquedaEjercicioDatalistWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_BusquedaEjercicioDatalistWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[55] 4[7] 2[21] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Administrador"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 153
               Right = 261
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_ConsultaAdministradores"
            Begin Extent = 
               Top = 0
               Left = 318
               Bottom = 149
               Right = 545
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_Empresa"
            Begin Extent = 
               Top = 151
               Left = 311
               Bottom = 247
               Right = 546
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_ConsultasAdministradores'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_ConsultasAdministradores'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Usuario"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 136
               Right = 247
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_UsuarioCredito"
            Begin Extent = 
               Top = 6
               Left = 285
               Bottom = 136
               Right = 494
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_CreditoUsuarioWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_CreditoUsuarioWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[55] 4[17] 2[10] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_DatosExtraUsuario"
            Begin Extent = 
               Top = 6
               Left = 403
               Bottom = 162
               Right = 621
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_DatosUsuario"
            Begin Extent = 
               Top = 183
               Left = 404
               Bottom = 313
               Right = 613
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_Usuario"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 226
               Right = 247
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 2745
         Alias = 900
         Table = 3645
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_LogueoUsuariosWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_LogueoUsuariosWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Administrador"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 136
               Right = 261
            End
            DisplayFlags = 280
            TopColumn = 1
         End
         Begin Table = "Tabla_Empresa"
            Begin Extent = 
               Top = 84
               Left = 299
               Bottom = 180
               Right = 508
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_MensajeAdministrador"
            Begin Extent = 
               Top = 6
               Left = 546
               Bottom = 151
               Right = 770
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MensajeAdministrador'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MensajeAdministrador'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[57] 4[17] 2[9] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Empresa"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 102
               Right = 247
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_MisEjercicios"
            Begin Extent = 
               Top = 0
               Left = 573
               Bottom = 181
               Right = 834
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_Usuario"
            Begin Extent = 
               Top = 15
               Left = 308
               Bottom = 178
               Right = 517
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MisEjercicios'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MisEjercicios'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[60] 4[13] 2[10] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_MisExplicaciones"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 178
               Right = 247
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_Empresa"
            Begin Extent = 
               Top = 24
               Left = 598
               Bottom = 120
               Right = 807
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_Usuario"
            Begin Extent = 
               Top = 13
               Left = 299
               Bottom = 143
               Right = 508
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MisExplicaciones'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MisExplicaciones'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Ejercicios"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 102
               Right = 247
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_UbicacionEjercicios"
            Begin Extent = 
               Top = 6
               Left = 285
               Bottom = 136
               Right = 494
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 12
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MostrarEnunciadoDatalistWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MostrarEnunciadoDatalistWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[49] 4[13] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Ejercicios"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 102
               Right = 247
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_UbicacionEjercicios"
            Begin Extent = 
               Top = 6
               Left = 532
               Bottom = 136
               Right = 741
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_EnunciadoEjercicios"
            Begin Extent = 
               Top = 107
               Left = 295
               Bottom = 221
               Right = 504
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MostrarListadoDeEjercicios'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MostrarListadoDeEjercicios'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[59] 4[2] 2[21] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_MisEjercicios"
            Begin Extent = 
               Top = 38
               Left = 0
               Bottom = 231
               Right = 261
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_Usuario"
            Begin Extent = 
               Top = 132
               Left = 323
               Bottom = 276
               Right = 532
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_Empresa"
            Begin Extent = 
               Top = 6
               Left = 584
               Bottom = 102
               Right = 793
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_Ejercicios"
            Begin Extent = 
               Top = 0
               Left = 312
               Bottom = 130
               Right = 521
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MostrarListadoMisEjercicios'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MostrarListadoMisEjercicios'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[52] 4[9] 2[21] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_MisExplicaciones"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 178
               Right = 247
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_Ejercicios"
            Begin Extent = 
               Top = 6
               Left = 285
               Bottom = 159
               Right = 494
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_Empresa"
            Begin Extent = 
               Top = 6
               Left = 532
               Bottom = 102
               Right = 741
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_Usuario"
            Begin Extent = 
               Top = 180
               Left = 286
               Bottom = 331
               Right = 495
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MostrarListadoMisExplicaciones'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_MostrarListadoMisExplicaciones'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[65] 4[11] 2[8] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Usuario"
            Begin Extent = 
               Top = 20
               Left = 106
               Bottom = 150
               Right = 315
            End
            DisplayFlags = 280
            TopColumn = 2
         End
         Begin Table = "Tabla_DatosUsuario"
            Begin Extent = 
               Top = 6
               Left = 532
               Bottom = 136
               Right = 741
            End
            DisplayFlags = 280
            TopColumn = 1
         End
         Begin Table = "Tabla_Movimientos"
            Begin Extent = 
               Top = 139
               Left = 525
               Bottom = 269
               Right = 734
            End
            DisplayFlags = 280
            TopColumn = 2
         End
         Begin Table = "Tabla_TipoMovimientos"
            Begin Extent = 
               Top = 227
               Left = 104
               Bottom = 323
               Right = 313
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_Movimientos'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_Movimientos'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = -288
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Usuario"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 154
               Right = 247
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_DatosUsuario"
            Begin Extent = 
               Top = 6
               Left = 285
               Bottom = 154
               Right = 494
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_PanelControlUsuarioWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_PanelControlUsuarioWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[52] 4[9] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Movimientos"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 161
               Right = 247
            End
            DisplayFlags = 280
            TopColumn = 1
         End
         Begin Table = "Tabla_Usuario"
            Begin Extent = 
               Top = 0
               Left = 327
               Bottom = 146
               Right = 536
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_TipoMovimientos"
            Begin Extent = 
               Top = 155
               Left = 323
               Bottom = 251
               Right = 532
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_PanelSaldoUsuarioWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_PanelSaldoUsuarioWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[47] 4[15] 2[21] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Usuario"
            Begin Extent = 
               Top = 67
               Left = 27
               Bottom = 220
               Right = 236
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_DatosExtraUsuario"
            Begin Extent = 
               Top = 6
               Left = 285
               Bottom = 153
               Right = 494
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_DatosUsuario"
            Begin Extent = 
               Top = 6
               Left = 532
               Bottom = 136
               Right = 741
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_RecuperarContraseñaWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_RecuperarContraseñaWeb'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Empresa"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 102
               Right = 247
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_TarjetaPrepaga"
            Begin Extent = 
               Top = 6
               Left = 285
               Bottom = 136
               Right = 494
            End
            DisplayFlags = 280
            TopColumn = 2
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_TarjetaPrepaga'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_TarjetaPrepaga'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Empresa"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 102
               Right = 247
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_DatosExtraUsuario"
            Begin Extent = 
               Top = 6
               Left = 285
               Bottom = 136
               Right = 494
            End
            DisplayFlags = 280
            TopColumn = 1
         End
         Begin Table = "Tabla_DatosUsuario"
            Begin Extent = 
               Top = 6
               Left = 532
               Bottom = 136
               Right = 741
            End
            DisplayFlags = 280
            TopColumn = 1
         End
         Begin Table = "Tabla_Usuario"
            Begin Extent = 
               Top = 127
               Left = 21
               Bottom = 257
               Right = 230
            End
            DisplayFlags = 280
            TopColumn = 2
         End
         Begin Table = "Tabla_UsuarioCredito"
            Begin Extent = 
               Top = 152
               Left = 269
               Bottom = 282
               Right = 478
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
       ' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_UsuarioAdministrador'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane2', @value=N'  Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_UsuarioAdministrador'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=2 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_UsuarioAdministrador'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPane1', @value=N'[0E232FF0-B466-11cf-A24F-00AA00A3EFFF, 1.00]
Begin DesignProperties = 
   Begin PaneConfigurations = 
      Begin PaneConfiguration = 0
         NumPanes = 4
         Configuration = "(H (1[40] 4[20] 2[20] 3) )"
      End
      Begin PaneConfiguration = 1
         NumPanes = 3
         Configuration = "(H (1 [50] 4 [25] 3))"
      End
      Begin PaneConfiguration = 2
         NumPanes = 3
         Configuration = "(H (1 [50] 2 [25] 3))"
      End
      Begin PaneConfiguration = 3
         NumPanes = 3
         Configuration = "(H (4 [30] 2 [40] 3))"
      End
      Begin PaneConfiguration = 4
         NumPanes = 2
         Configuration = "(H (1 [56] 3))"
      End
      Begin PaneConfiguration = 5
         NumPanes = 2
         Configuration = "(H (2 [66] 3))"
      End
      Begin PaneConfiguration = 6
         NumPanes = 2
         Configuration = "(H (4 [50] 3))"
      End
      Begin PaneConfiguration = 7
         NumPanes = 1
         Configuration = "(V (3))"
      End
      Begin PaneConfiguration = 8
         NumPanes = 3
         Configuration = "(H (1[56] 4[18] 2) )"
      End
      Begin PaneConfiguration = 9
         NumPanes = 2
         Configuration = "(H (1 [75] 4))"
      End
      Begin PaneConfiguration = 10
         NumPanes = 2
         Configuration = "(H (1[66] 2) )"
      End
      Begin PaneConfiguration = 11
         NumPanes = 2
         Configuration = "(H (4 [60] 2))"
      End
      Begin PaneConfiguration = 12
         NumPanes = 1
         Configuration = "(H (1) )"
      End
      Begin PaneConfiguration = 13
         NumPanes = 1
         Configuration = "(V (4))"
      End
      Begin PaneConfiguration = 14
         NumPanes = 1
         Configuration = "(V (2))"
      End
      ActivePaneConfig = 0
   End
   Begin DiagramPane = 
      Begin Origin = 
         Top = 0
         Left = 0
      End
      Begin Tables = 
         Begin Table = "Tabla_Empresa"
            Begin Extent = 
               Top = 6
               Left = 38
               Bottom = 102
               Right = 247
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_Usuario"
            Begin Extent = 
               Top = 6
               Left = 285
               Bottom = 174
               Right = 494
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_UsuarioCredito"
            Begin Extent = 
               Top = 6
               Left = 532
               Bottom = 138
               Right = 741
            End
            DisplayFlags = 280
            TopColumn = 0
         End
         Begin Table = "Tabla_DatosUsuario"
            Begin Extent = 
               Top = 109
               Left = 56
               Bottom = 254
               Right = 265
            End
            DisplayFlags = 280
            TopColumn = 0
         End
      End
   End
   Begin SQLPane = 
   End
   Begin DataPane = 
      Begin ParameterDefaults = ""
      End
   End
   Begin CriteriaPane = 
      Begin ColumnWidths = 11
         Column = 1440
         Alias = 900
         Table = 1170
         Output = 720
         Append = 1400
         NewValue = 1170
         SortType = 1350
         SortOrder = 1410
         GroupBy = 1350
         Filter = 1350
         Or = 1350
         Or = 1350
         Or = 1350
      End
   End
End
' , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_UsuarioCredito'
GO
EXEC sys.sp_addextendedproperty @name=N'MS_DiagramPaneCount', @value=1 , @level0type=N'SCHEMA',@level0name=N'dbo', @level1type=N'VIEW',@level1name=N'Vista_UsuarioCredito'
GO
USE [master]
GO
ALTER DATABASE [baseWebSupervisor] SET  READ_WRITE 
GO
